\hypertarget{plugins_2table_2classes_2_quirks_8js}{\section{src/\+Acme\+Group/\+Labo\+Bundle/\+Resources/public/js/tinymce/plugins/table/classes/\+Quirks.js File Reference}
\label{plugins_2table_2classes_2_quirks_8js}\index{src/\+Acme\+Group/\+Labo\+Bundle/\+Resources/public/js/tinymce/plugins/table/classes/\+Quirks.\+js@{src/\+Acme\+Group/\+Labo\+Bundle/\+Resources/public/js/tinymce/plugins/table/classes/\+Quirks.\+js}}
}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{plugins_2table_2classes_2_quirks_8js_ae4ce1ee13cfe9e9697754ba99fc0a369}{define} (\char`\"{}tinymce/tableplugin/Quirks\char`\"{}, \mbox{[}\char`\"{}\hyperlink{legacyoutput_2plugin_8min_8js_a9e0c63e13122add16db57b355b91bbc8}{tinymce}/util/V\+K\char`\"{},\char`\"{}\hyperlink{legacyoutput_2plugin_8min_8js_a9e0c63e13122add16db57b355b91bbc8}{tinymce}/Env\char`\"{},\char`\"{}\hyperlink{legacyoutput_2plugin_8min_8js_a9e0c63e13122add16db57b355b91bbc8}{tinymce}/util/Tools\char`\"{}\mbox{]}, function(V\+K, Env, Tools)\{var \hyperlink{fullpage_2plugin_8min_8js_a536422939f8cd6b5867a8fb424c3c02e}{each}=\hyperlink{fullpage_2plugin_8min_8js_a536422939f8cd6b5867a8fb424c3c02e}{Tools.\+each};function get\+Span\+Val(td, name)\{return parse\+Int(td.\+get\+Attribute(name)$\vert$$\vert$1, 10);\}return function(editor)\{function move\+Web\+Kit\+Selection()\{function event\+Handler(\hyperlink{validate_8js_acafd152b1d81d2bd0f5775007db75586}{e})\{var key=e.\+key\+Code;function \hyperlink{jquery_8tooltip_8js_a01a575341aa0f5637293fc914c706efd}{handle}(up\+Bool, source\+Node)\{var sibling\+Direction=up\+Bool? 'previous\+Sibling'\+: 'next\+Sibling';var current\+Row=editor.\+dom.\+get\+Parent(source\+Node, 'tr');var sibling\+Row=current\+Row\mbox{[}sibling\+Direction\mbox{]};\hyperlink{fullpage_2plugin_8js_a8b98017e64ef036adb9ae327ff94abe1}{if}(sibling\+Row)\{move\+Cursor\+To\+Row(editor, source\+Node, sibling\+Row, up\+Bool);e.\+prevent\+Default();return true;\}\hyperlink{jquery_8iframe-transport_8js_a0544c3fe466e421738dae463968b70ba}{else}\{var table\+Node=editor.\+dom.\+get\+Parent(current\+Row, 'table');var middle\+Node=current\+Row.\+parent\+Node;var parent\+Node\+Name=middle\+Node.\+node\+Name.\+to\+Lower\+Case();\hyperlink{fullpage_2plugin_8js_a8b98017e64ef036adb9ae327ff94abe1}{if}(parent\+Node\+Name=== '\hyperlink{core_8constructor_8js_a99b0542c7c50fe8757c55bf9dac5f3be}{tbody}'$\vert$$\vert$parent\+Node\+Name===(up\+Bool? '\hyperlink{core_8constructor_8js_a30c9de8852481ff74ff5dc1f939de464}{tfoot}'\+: '\hyperlink{core_8constructor_8js_a856be760b6816c9591ce69f0a2b43693}{thead}'))\{var target\+Parent=get\+Target\+Parent(up\+Bool, table\+Node, middle\+Node, '\hyperlink{core_8constructor_8js_a99b0542c7c50fe8757c55bf9dac5f3be}{tbody}');\hyperlink{fullpage_2plugin_8js_a8b98017e64ef036adb9ae327ff94abe1}{if}(target\+Parent!==\hyperlink{validate_8js_afb8e110345c45e74478894341ab6b28e}{null})\{return move\+To\+Row\+In\+Target(up\+Bool, target\+Parent, source\+Node);\}\}return escape\+Table(up\+Bool, current\+Row, sibling\+Direction, table\+Node);\}\}function get\+Target\+Parent(up\+Bool, top\+Node, second\+Node, node\+Name)\{var tbodies=\hyperlink{validate_8js_a107b4864f70df98ef4a521c0b2bc80c7}{editor.\+dom.\+select}('$>$'+node\+Name, top\+Node);var \hyperlink{jquery-ui_8js_a5cd004409a854f3c106e2c3424b89292}{position}=tbodies.\+index\+Of(second\+Node);\hyperlink{fullpage_2plugin_8js_a8b98017e64ef036adb9ae327ff94abe1}{if}(up\+Bool \&\&\hyperlink{jquery-ui_8js_a5cd004409a854f3c106e2c3424b89292}{position}===0$\vert$$\vert$!up\+Bool \&\&\hyperlink{jquery-ui_8js_a5cd004409a854f3c106e2c3424b89292}{position}===tbodies.\+length-\/1)\{return get\+First\+Head\+Or\+Foot(up\+Bool, top\+Node);\}\hyperlink{jquery_8iframe-transport_8js_a0544c3fe466e421738dae463968b70ba}{else} \hyperlink{fullpage_2plugin_8js_a8b98017e64ef036adb9ae327ff94abe1}{if}(\hyperlink{jquery-ui_8js_a5cd004409a854f3c106e2c3424b89292}{position}===-\/1)\{var top\+Or\+Bottom=second\+Node.\+tag\+Name.\+to\+Lower\+Case()=== '\hyperlink{core_8constructor_8js_a856be760b6816c9591ce69f0a2b43693}{thead}'?0\+:tbodies.\+length-\/1;return tbodies\mbox{[}top\+Or\+Bottom\mbox{]};\}\hyperlink{jquery_8iframe-transport_8js_a0544c3fe466e421738dae463968b70ba}{else}\{return tbodies\mbox{[}\hyperlink{jquery-ui_8js_a5cd004409a854f3c106e2c3424b89292}{position}+(up\+Bool?-\/1\+:1)\mbox{]};\}\}function get\+First\+Head\+Or\+Foot(up\+Bool, parent)\{var \hyperlink{_j_query_functions_8js_ad2e37063c8c2b3db869c735b88473786}{tag\+Name}=up\+Bool? '\hyperlink{core_8constructor_8js_a856be760b6816c9591ce69f0a2b43693}{thead}'\+: '\hyperlink{core_8constructor_8js_a30c9de8852481ff74ff5dc1f939de464}{tfoot}';var head\+Or\+Foot=\hyperlink{validate_8js_a107b4864f70df98ef4a521c0b2bc80c7}{editor.\+dom.\+select}('$>$'+\hyperlink{_j_query_functions_8js_ad2e37063c8c2b3db869c735b88473786}{tag\+Name}, parent);return head\+Or\+Foot.\+length!==0?head\+Or\+Foot\mbox{[}0\mbox{]}\+:\hyperlink{validate_8js_afb8e110345c45e74478894341ab6b28e}{null};\}function move\+To\+Row\+In\+Target(up\+Bool, target\+Parent, source\+Node)\{var target\+Row=get\+Child\+For\+Direction(target\+Parent, up\+Bool);\hyperlink{fullpage_2plugin_8js_a8b98017e64ef036adb9ae327ff94abe1}{if}(target\+Row)\{move\+Cursor\+To\+Row(editor, source\+Node, target\+Row, up\+Bool);\}e.\+prevent\+Default();return true;\}function escape\+Table(up\+Bool, current\+Row, sibling\+Direction, table)\{var table\+Sibling=table\mbox{[}sibling\+Direction\mbox{]};\hyperlink{fullpage_2plugin_8js_a8b98017e64ef036adb9ae327ff94abe1}{if}(table\+Sibling)\{move\+Cursor\+To\+Start\+Of\+Element(table\+Sibling);return true;\}\hyperlink{jquery_8iframe-transport_8js_a0544c3fe466e421738dae463968b70ba}{else}\{var parent\+Cell=editor.\+dom.\+get\+Parent(table, 'td, th');\hyperlink{fullpage_2plugin_8js_a8b98017e64ef036adb9ae327ff94abe1}{if}(parent\+Cell)\{return \hyperlink{jquery_8tooltip_8js_a01a575341aa0f5637293fc914c706efd}{handle}(up\+Bool, parent\+Cell, \hyperlink{validate_8js_acafd152b1d81d2bd0f5775007db75586}{e});\}\hyperlink{jquery_8iframe-transport_8js_a0544c3fe466e421738dae463968b70ba}{else}\{var back\+Up\+Sibling=get\+Child\+For\+Direction(current\+Row,!up\+Bool);move\+Cursor\+To\+Start\+Of\+Element(back\+Up\+Sibling);e.\+prevent\+Default();return \hyperlink{validate_8js_a5df37b7f02e5cdc7d9412b7f872b8e01}{false};\}\}\}function get\+Child\+For\+Direction(parent, up)\{var child=parent \&\&parent\mbox{[}up? 'last\+Child'\+: 'first\+Child'\mbox{]};return child \&\&child.\+node\+Name=== 'B\+R'?editor.\+dom.\+get\+Parent(child, 'td, th')\+:child;\}function move\+Cursor\+To\+Start\+Of\+Element(\hyperlink{fullpage_2plugin_8min_8js_ab767a859d1217315f42c9bb52fc648dc}{n})\{editor.\+selection.\+set\+Cursor\+Location(\hyperlink{fullpage_2plugin_8min_8js_ab767a859d1217315f42c9bb52fc648dc}{n}, 0);\}function is\+Vertical\+Movement()\{return key==V\+K.\+U\+P$\vert$$\vert$key==V\+K.\+D\+O\+W\+N;\}function is\+In\+Table(editor)\{var node=editor.\+selection.\+get\+Node();var current\+Row=editor.\+dom.\+get\+Parent(node, 'tr');return current\+Row!==\hyperlink{validate_8js_afb8e110345c45e74478894341ab6b28e}{null};\}function column\+Index(column)\{var col\+Index=0;var \hyperlink{fullpage_2plugin_8min_8js_a92587cc54822a9f38871b2d0e0952da1}{c}=column;\hyperlink{extras_2_scroller_2media_2data_2server__processing_8php_a83084cf6f83823d8593882985353708d}{while}(c.\+previous\+Sibling)\{\hyperlink{fullpage_2plugin_8min_8js_a92587cc54822a9f38871b2d0e0952da1}{c}=c.\+previous\+Sibling;col\+Index=col\+Index+get\+Span\+Val(\hyperlink{fullpage_2plugin_8min_8js_a92587cc54822a9f38871b2d0e0952da1}{c},\char`\"{}colspan\char`\"{});\}return col\+Index;\}function find\+Column(row\+Element, column\+Index)\{var \hyperlink{fullpage_2plugin_8min_8js_a92587cc54822a9f38871b2d0e0952da1}{c}=0, \hyperlink{jquery_8fancybox_8pack_8js_aaa5fef39529cdffdfa257202bb4fda9f}{r}=0;\hyperlink{fullpage_2plugin_8min_8js_a536422939f8cd6b5867a8fb424c3c02e}{each}(row\+Element.\+children, function(cell, \hyperlink{validate_8js_a5e25b1d1bed9ab5f3174b76d6a722180}{i})\{\hyperlink{fullpage_2plugin_8min_8js_a92587cc54822a9f38871b2d0e0952da1}{c}=\hyperlink{fullpage_2plugin_8min_8js_a92587cc54822a9f38871b2d0e0952da1}{c}+get\+Span\+Val(cell,\char`\"{}colspan\char`\"{});r=\hyperlink{validate_8js_a5e25b1d1bed9ab5f3174b76d6a722180}{i};\hyperlink{fullpage_2plugin_8js_a8b98017e64ef036adb9ae327ff94abe1}{if}(\hyperlink{fullpage_2plugin_8min_8js_a92587cc54822a9f38871b2d0e0952da1}{c} $>$ column\+Index)\{return \hyperlink{validate_8js_a5df37b7f02e5cdc7d9412b7f872b8e01}{false};\}\});return \hyperlink{jquery_8fancybox_8pack_8js_aaa5fef39529cdffdfa257202bb4fda9f}{r};\}function move\+Cursor\+To\+Row(ed, node, row, up\+Bool)\{var src\+Column\+Index=column\+Index(editor.\+dom.\+get\+Parent(node, 'td, th'));var tgt\+Column\+Index=find\+Column(row, src\+Column\+Index);var tgt\+Node=row.\+child\+Nodes\mbox{[}tgt\+Column\+Index\mbox{]};var row\+Cell\+Target=get\+Child\+For\+Direction(tgt\+Node, up\+Bool);move\+Cursor\+To\+Start\+Of\+Element(row\+Cell\+Target$\vert$$\vert$tgt\+Node);\}function should\+Fix\+Caret(pre\+Browser\+Node)\{var new\+Node=editor.\+selection.\+get\+Node();var new\+Parent=editor.\+dom.\+get\+Parent(new\+Node, 'td, th');var old\+Parent=editor.\+dom.\+get\+Parent(pre\+Browser\+Node, 'td, th');return new\+Parent \&\&new\+Parent!==old\+Parent \&\&check\+Same\+Parent\+Table(new\+Parent, old\+Parent);\}function check\+Same\+Parent\+Table(node\+One, Node\+Two)\{return editor.\+dom.\+get\+Parent(node\+One, 'T\+A\+B\+L\+E')===editor.\+dom.\+get\+Parent(Node\+Two, 'T\+A\+B\+L\+E');\}\hyperlink{fullpage_2plugin_8js_a8b98017e64ef036adb9ae327ff94abe1}{if}(is\+Vertical\+Movement()\&\&is\+In\+Table(editor))\{var pre\+Browser\+Node=editor.\+selection.\+get\+Node();set\+Timeout(function()\{\hyperlink{fullpage_2plugin_8js_a8b98017e64ef036adb9ae327ff94abe1}{if}(should\+Fix\+Caret(pre\+Browser\+Node))\{\hyperlink{jquery_8tooltip_8js_a01a575341aa0f5637293fc914c706efd}{handle}(!e.\+shift\+Key \&\&key===V\+K.\+U\+P, pre\+Browser\+Node, \hyperlink{validate_8js_acafd152b1d81d2bd0f5775007db75586}{e});\}\}, 0);\}\}\hyperlink{fullpage_2plugin_8min_8js_a1cfa98b7fed2aaf9fee3b68dbb7f9497}{editor.\+on}('Key\+Down', function(\hyperlink{validate_8js_acafd152b1d81d2bd0f5775007db75586}{e})\{event\+Handler(\hyperlink{validate_8js_acafd152b1d81d2bd0f5775007db75586}{e});\});\}function fix\+Before\+Table\+Caret\+Bug()\{function is\+At\+Start(rng, par)\{var \hyperlink{outside_events_8js_a6966a4bf23931ad4f323b1b8c1e1801f}{doc}=par.\+owner\+Document, rng2=doc.\+create\+Range(), \hyperlink{fullpage_2plugin_8js_a97a64dfa22b20bcc682327a272b84e73}{elm};rng2.\+set\+Start\+Before(par);rng2.\+set\+End(rng.\+end\+Container, rng.\+end\+Offset);\hyperlink{fullpage_2plugin_8js_a97a64dfa22b20bcc682327a272b84e73}{elm}=doc.\+create\+Element('body');\hyperlink{jquery-ui_8js_a282eb35406abfe6001815a393642b8cb}{elm.\+append\+Child}(rng2.\+clone\+Contents());return elm.\+inner\+H\+T\+M\+L.\+replace(/$<$(br$\vert$img$\vert$object$\vert$embed$\vert$\hyperlink{validate_8js_a07a2aabd64594dc36dd810cad2669deb}{input}$\vert$\hyperlink{validate_8js_a7238bc4fc70c702e90c5c654ff465b8d}{textarea})\mbox{[}$^\wedge$$>$\mbox{]}$\ast$ $>$/gi, '-\/').replace(/$<$\mbox{[}$^\wedge$$>$\mbox{]}+$>$/\hyperlink{fullpage_2plugin_8min_8js_a103df269476e78897c9c4c6cb8f4eb06}{g}, '').length===0;\}\hyperlink{fullpage_2plugin_8min_8js_a1cfa98b7fed2aaf9fee3b68dbb7f9497}{editor.\+on}('Key\+Down', function(\hyperlink{validate_8js_acafd152b1d81d2bd0f5775007db75586}{e})\{var rng, table, dom=editor.\+dom;\hyperlink{fullpage_2plugin_8js_a8b98017e64ef036adb9ae327ff94abe1}{if}(e.\+key\+Code==37$\vert$$\vert$e.\+key\+Code==38)\{rng=editor.\+selection.\+get\+Rng();table=dom.\+get\+Parent(rng.\+start\+Container, 'table');\hyperlink{fullpage_2plugin_8js_a8b98017e64ef036adb9ae327ff94abe1}{if}(table \&\&editor.\+get\+Body().first\+Child==table)\{\hyperlink{fullpage_2plugin_8js_a8b98017e64ef036adb9ae327ff94abe1}{if}(is\+At\+Start(rng, table))\{rng=dom.\+create\+Rng();rng.\+set\+Start\+Before(table);rng.\+set\+End\+Before(table);editor.\+selection.\+set\+Rng(rng);e.\+prevent\+Default();\}\}\}\});\}function fix\+Table\+Caret\+Pos()\{\hyperlink{fullpage_2plugin_8min_8js_a1cfa98b7fed2aaf9fee3b68dbb7f9497}{editor.\+on}('Key\+Down Set\+Content Visual\+Aid', function()\{var last;\hyperlink{tinymce_8jquery_8dev_8js_a4675a875b20881bc5f7011f49fbd4da7}{for}(last=editor.\+get\+Body().last\+Child;last;last=last.\+previous\+Sibling)\{\hyperlink{fullpage_2plugin_8js_a8b98017e64ef036adb9ae327ff94abe1}{if}(last.\+node\+Type==3)\{\hyperlink{fullpage_2plugin_8js_a8b98017e64ef036adb9ae327ff94abe1}{if}(last.\+node\+Value.\+length $>$ 0)\{break;\}\}\hyperlink{jquery_8iframe-transport_8js_a0544c3fe466e421738dae463968b70ba}{else} \hyperlink{fullpage_2plugin_8js_a8b98017e64ef036adb9ae327ff94abe1}{if}(last.\+node\+Type==1 \&\&!last.\+get\+Attribute('\hyperlink{fullpage_2plugin_8js_a718c1bf5a3bf21ebb980203b142e5b75}{data}-\/mce-\/bogus'))\{break;\}\}\hyperlink{fullpage_2plugin_8js_a8b98017e64ef036adb9ae327ff94abe1}{if}(last \&\&last.\+node\+Name== 'T\+A\+B\+L\+E')\{\hyperlink{fullpage_2plugin_8js_a8b98017e64ef036adb9ae327ff94abe1}{if}(editor.\+settings.\+forced\+\_\+root\+\_\+block)\{\hyperlink{theme_8min_8js_a1833965973c7833716346fa64230bb38}{editor.\+dom.\+add}(editor.\+get\+Body(), editor.\+settings.\+forced\+\_\+root\+\_\+block, editor.\+settings.\+forced\+\_\+root\+\_\+block\+\_\+attrs, \hyperlink{jquery-ui_8js_a7434fb8cf6da72f87b732a8a052232a3}{Env.\+ie} \&\&\hyperlink{jquery-ui_8js_a7434fb8cf6da72f87b732a8a052232a3}{Env.\+ie}$<$ 11? '\&nbsp;'\+: '$<$ br \hyperlink{fullpage_2plugin_8js_a718c1bf5a3bf21ebb980203b142e5b75}{data}-\/mce-\/bogus=\char`\"{}1\char`\"{}/$>$');\}\hyperlink{jquery_8iframe-transport_8js_a0544c3fe466e421738dae463968b70ba}{else}\{\hyperlink{theme_8min_8js_a1833965973c7833716346fa64230bb38}{editor.\+dom.\+add}(editor.\+get\+Body(), 'br',\{'\hyperlink{fullpage_2plugin_8js_a718c1bf5a3bf21ebb980203b142e5b75}{data}-\/mce-\/bogus'\+: '1'\});\}\}\});\hyperlink{fullpage_2plugin_8min_8js_a1cfa98b7fed2aaf9fee3b68dbb7f9497}{editor.\+on}('Pre\+Process', function(\hyperlink{fullpage_2plugin_8min_8js_a4afc7c854f61c136d7bcfa8997651b88}{o})\{var last=o.\+node.\+last\+Child;\hyperlink{fullpage_2plugin_8js_a8b98017e64ef036adb9ae327ff94abe1}{if}(last \&\&(last.\+node\+Name==\char`\"{}B\+R\char`\"{}$\vert$$\vert$(last.\+child\+Nodes.\+length==1 \&\&(last.\+first\+Child.\+node\+Name== 'B\+R'$\vert$$\vert$last.\+first\+Child.\+node\+Value== '\textbackslash{}u00a0')))\&\&last.\+previous\+Sibling \&\&last.\+previous\+Sibling.\+node\+Name==\char`\"{}T\+A\+B\+L\+E\char`\"{})\{editor.\+dom.\+remove(last);\}\});\}function fix\+Table\+Cell\+Selection()\{function table\+Cell\+Selected(ed, rng, \hyperlink{fullpage_2plugin_8min_8js_ab767a859d1217315f42c9bb52fc648dc}{n}, current\+Cell)\{var T\+E\+X\+T\+\_\+\+N\+O\+D\+E=3, table=ed.\+dom.\+get\+Parent(rng.\+start\+Container, 'T\+A\+B\+L\+E');var table\+Parent, all\+Of\+Cell\+Selected, table\+Cell\+Selection;\hyperlink{fullpage_2plugin_8js_a8b98017e64ef036adb9ae327ff94abe1}{if}(table)\{table\+Parent=table.\+parent\+Node;\}all\+Of\+Cell\+Selected=rng.\+start\+Container.\+node\+Type==T\+E\+X\+T\+\_\+\+N\+O\+D\+E \&\&rng.\+start\+Offset===0 \&\&rng.\+end\+Offset===0 \&\&current\+Cell \&\&(n.\+node\+Name==\char`\"{}T\+R\char`\"{}$\vert$$\vert$n==table\+Parent);table\+Cell\+Selection=(n.\+node\+Name==\char`\"{}T\+D\char`\"{}$\vert$$\vert$n.\+node\+Name==\char`\"{}T\+H\char`\"{})\&\&!current\+Cell;return all\+Of\+Cell\+Selected$\vert$$\vert$table\+Cell\+Selection;\}function fix\+Selection()\{var rng=editor.\+selection.\+get\+Rng();var \hyperlink{fullpage_2plugin_8min_8js_ab767a859d1217315f42c9bb52fc648dc}{n}=editor.\+selection.\+get\+Node();var current\+Cell=editor.\+dom.\+get\+Parent(rng.\+start\+Container, 'T\+D, T\+H');\hyperlink{fullpage_2plugin_8js_a8b98017e64ef036adb9ae327ff94abe1}{if}(!table\+Cell\+Selected(editor, rng, \hyperlink{fullpage_2plugin_8min_8js_ab767a859d1217315f42c9bb52fc648dc}{n}, current\+Cell))\{return;\}\hyperlink{fullpage_2plugin_8js_a8b98017e64ef036adb9ae327ff94abe1}{if}(!current\+Cell)\{current\+Cell=\hyperlink{fullpage_2plugin_8min_8js_ab767a859d1217315f42c9bb52fc648dc}{n};\}var end=current\+Cell.\+last\+Child;\hyperlink{extras_2_scroller_2media_2data_2server__processing_8php_a83084cf6f83823d8593882985353708d}{while}(end.\+last\+Child)\{end=end.\+last\+Child;\}rng.\+set\+End(end, end.\+node\+Value.\+length);editor.\+selection.\+set\+Rng(rng);\}\hyperlink{fullpage_2plugin_8min_8js_a1cfa98b7fed2aaf9fee3b68dbb7f9497}{editor.\+on}('Key\+Down', function()\{fix\+Selection();\});\hyperlink{fullpage_2plugin_8min_8js_a1cfa98b7fed2aaf9fee3b68dbb7f9497}{editor.\+on}('Mouse\+Down', function(\hyperlink{validate_8js_acafd152b1d81d2bd0f5775007db75586}{e})\{\hyperlink{fullpage_2plugin_8js_a8b98017e64ef036adb9ae327ff94abe1}{if}(e.\+button!=2)\{fix\+Selection();\}\});\}\hyperlink{fullpage_2plugin_8js_a8b98017e64ef036adb9ae327ff94abe1}{if}(Env.\+webkit)\{move\+Web\+Kit\+Selection();fix\+Table\+Cell\+Selection();\}\hyperlink{fullpage_2plugin_8js_a8b98017e64ef036adb9ae327ff94abe1}{if}(Env.\+gecko)\{fix\+Before\+Table\+Caret\+Bug();fix\+Table\+Caret\+Pos();\}\hyperlink{fullpage_2plugin_8js_a8b98017e64ef036adb9ae327ff94abe1}{if}(\hyperlink{jquery-ui_8js_a7434fb8cf6da72f87b732a8a052232a3}{Env.\+ie} $>$ 10)\{fix\+Before\+Table\+Caret\+Bug();fix\+Table\+Caret\+Pos();\}\};\})
\end{DoxyCompactItemize}


\subsection{Function Documentation}
\hypertarget{plugins_2table_2classes_2_quirks_8js_ae4ce1ee13cfe9e9697754ba99fc0a369}{\index{plugins/table/classes/\+Quirks.\+js@{plugins/table/classes/\+Quirks.\+js}!define@{define}}
\index{define@{define}!plugins/table/classes/\+Quirks.\+js@{plugins/table/classes/\+Quirks.\+js}}
\subsubsection[{define}]{\setlength{\rightskip}{0pt plus 5cm}define (
\begin{DoxyParamCaption}
\item[{\char`\"{}tinymce/tableplugin/Quirks\char`\"{}}]{, }
\item[{function(V\+K, Env, Tools)\{var {\bf each}={\bf Tools.\+each};function get\+Span\+Val(td, name)\{return parse\+Int(td.\+get\+Attribute(name)$\vert$$\vert$1, 10);\}return function(editor)\{function move\+Web\+Kit\+Selection()\{function event\+Handler({\bf e})\{var key=e.\+key\+Code;function {\bf handle}(up\+Bool, source\+Node)\{var sibling\+Direction=up\+Bool? 'previous\+Sibling'\+: 'next\+Sibling';var current\+Row=editor.\+dom.\+get\+Parent(source\+Node, 'tr');var sibling\+Row=current\+Row\mbox{[}sibling\+Direction\mbox{]};{\bf if}(sibling\+Row)\{move\+Cursor\+To\+Row(editor, source\+Node, sibling\+Row, up\+Bool);e.\+prevent\+Default();return true;\}{\bf else}\{var table\+Node=editor.\+dom.\+get\+Parent(current\+Row, 'table');var middle\+Node=current\+Row.\+parent\+Node;var parent\+Node\+Name=middle\+Node.\+node\+Name.\+to\+Lower\+Case();{\bf if}(parent\+Node\+Name=== '{\bf tbody}'$\vert$$\vert$parent\+Node\+Name===(up\+Bool? '{\bf tfoot}'\+: '{\bf thead}'))\{var target\+Parent=get\+Target\+Parent(up\+Bool, table\+Node, middle\+Node, '{\bf tbody}');{\bf if}(target\+Parent!=={\bf null})\{return move\+To\+Row\+In\+Target(up\+Bool, target\+Parent, source\+Node);\}\}return escape\+Table(up\+Bool, current\+Row, sibling\+Direction, table\+Node);\}\}function get\+Target\+Parent(up\+Bool, top\+Node, second\+Node, node\+Name)\{var tbodies={\bf editor.\+dom.\+select}('$>$'+node\+Name, top\+Node);var {\bf position}=tbodies.\+index\+Of(second\+Node);{\bf if}(up\+Bool \&\&{\bf position}===0$\vert$$\vert$!up\+Bool \&\&{\bf position}===tbodies.\+length-\/1)\{return get\+First\+Head\+Or\+Foot(up\+Bool, top\+Node);\}{\bf else} {\bf if}({\bf position}===-\/1)\{var top\+Or\+Bottom=second\+Node.\+tag\+Name.\+to\+Lower\+Case()=== '{\bf thead}'?0\+:tbodies.\+length-\/1;return tbodies\mbox{[}top\+Or\+Bottom\mbox{]};\}{\bf else}\{return tbodies\mbox{[}{\bf position}+(up\+Bool?-\/1\+:1)\mbox{]};\}\}function get\+First\+Head\+Or\+Foot(up\+Bool, parent)\{var {\bf tag\+Name}=up\+Bool? '{\bf thead}'\+: '{\bf tfoot}';var head\+Or\+Foot={\bf editor.\+dom.\+select}('$>$'+{\bf tag\+Name}, parent);return head\+Or\+Foot.\+length!==0?head\+Or\+Foot\mbox{[}0\mbox{]}\+:{\bf null};\}function move\+To\+Row\+In\+Target(up\+Bool, target\+Parent, source\+Node)\{var target\+Row=get\+Child\+For\+Direction(target\+Parent, up\+Bool);{\bf if}(target\+Row)\{move\+Cursor\+To\+Row(editor, source\+Node, target\+Row, up\+Bool);\}e.\+prevent\+Default();return true;\}function escape\+Table(up\+Bool, current\+Row, sibling\+Direction, table)\{var table\+Sibling=table\mbox{[}sibling\+Direction\mbox{]};{\bf if}(table\+Sibling)\{move\+Cursor\+To\+Start\+Of\+Element(table\+Sibling);return true;\}{\bf else}\{var parent\+Cell=editor.\+dom.\+get\+Parent(table, 'td, th');{\bf if}(parent\+Cell)\{return {\bf handle}(up\+Bool, parent\+Cell, {\bf e});\}{\bf else}\{var back\+Up\+Sibling=get\+Child\+For\+Direction(current\+Row,!up\+Bool);move\+Cursor\+To\+Start\+Of\+Element(back\+Up\+Sibling);e.\+prevent\+Default();return {\bf false};\}\}\}function get\+Child\+For\+Direction(parent, up)\{var child=parent \&\&parent\mbox{[}up? 'last\+Child'\+: 'first\+Child'\mbox{]};return child \&\&child.\+node\+Name=== 'B\+R'?editor.\+dom.\+get\+Parent(child, 'td, th')\+:child;\}function move\+Cursor\+To\+Start\+Of\+Element({\bf n})\{editor.\+selection.\+set\+Cursor\+Location({\bf n}, 0);\}function is\+Vertical\+Movement()\{return key==V\+K.\+U\+P$\vert$$\vert$key==V\+K.\+D\+O\+W\+N;\}function is\+In\+Table(editor)\{var node=editor.\+selection.\+get\+Node();var current\+Row=editor.\+dom.\+get\+Parent(node, 'tr');return current\+Row!=={\bf null};\}function column\+Index(column)\{var col\+Index=0;var {\bf c}=column;{\bf while}(c.\+previous\+Sibling)\{{\bf c}=c.\+previous\+Sibling;col\+Index=col\+Index+get\+Span\+Val({\bf c},\char`\"{}colspan\char`\"{});\}return col\+Index;\}function find\+Column(row\+Element, column\+Index)\{var {\bf c}=0, {\bf r}=0;{\bf each}(row\+Element.\+children, function(cell, {\bf i})\{{\bf c}={\bf c}+get\+Span\+Val(cell,\char`\"{}colspan\char`\"{});r={\bf i};{\bf if}({\bf c} $>$ column\+Index)\{return {\bf false};\}\});return {\bf r};\}function move\+Cursor\+To\+Row(ed, node, row, up\+Bool)\{var src\+Column\+Index=column\+Index(editor.\+dom.\+get\+Parent(node, 'td, th'));var tgt\+Column\+Index=find\+Column(row, src\+Column\+Index);var tgt\+Node=row.\+child\+Nodes\mbox{[}tgt\+Column\+Index\mbox{]};var row\+Cell\+Target=get\+Child\+For\+Direction(tgt\+Node, up\+Bool);move\+Cursor\+To\+Start\+Of\+Element(row\+Cell\+Target$\vert$$\vert$tgt\+Node);\}function should\+Fix\+Caret(pre\+Browser\+Node)\{var new\+Node=editor.\+selection.\+get\+Node();var new\+Parent=editor.\+dom.\+get\+Parent(new\+Node, 'td, th');var old\+Parent=editor.\+dom.\+get\+Parent(pre\+Browser\+Node, 'td, th');return new\+Parent \&\&new\+Parent!==old\+Parent \&\&check\+Same\+Parent\+Table(new\+Parent, old\+Parent);\}function check\+Same\+Parent\+Table(node\+One, Node\+Two)\{return editor.\+dom.\+get\+Parent(node\+One, 'T\+A\+B\+L\+E')===editor.\+dom.\+get\+Parent(Node\+Two, 'T\+A\+B\+L\+E');\}{\bf if}(is\+Vertical\+Movement()\&\&is\+In\+Table(editor))\{var pre\+Browser\+Node=editor.\+selection.\+get\+Node();set\+Timeout(function()\{{\bf if}(should\+Fix\+Caret(pre\+Browser\+Node))\{{\bf handle}(!e.\+shift\+Key \&\&key===V\+K.\+U\+P, pre\+Browser\+Node, {\bf e});\}\}, 0);\}\}{\bf editor.\+on}('Key\+Down', function({\bf e})\{event\+Handler({\bf e});\});\}function fix\+Before\+Table\+Caret\+Bug()\{function is\+At\+Start(rng, par)\{var {\bf doc}=par.\+owner\+Document, rng2=doc.\+create\+Range(), {\bf elm};rng2.\+set\+Start\+Before(par);rng2.\+set\+End(rng.\+end\+Container, rng.\+end\+Offset);{\bf elm}=doc.\+create\+Element('body');{\bf elm.\+append\+Child}(rng2.\+clone\+Contents());return elm.\+inner\+H\+T\+M\+L.\+replace(/$<$(br$\vert$img$\vert$object$\vert$embed$\vert${\bf input}$\vert${\bf textarea})\mbox{[}$^\wedge$$>$\mbox{]}$\ast$ $>$/gi, '-\/').replace(/$<$\mbox{[}$^\wedge$$>$\mbox{]}+$>$/{\bf g}, '').length===0;\}{\bf editor.\+on}('Key\+Down', function({\bf e})\{var rng, table, dom=editor.\+dom;{\bf if}(e.\+key\+Code==37$\vert$$\vert$e.\+key\+Code==38)\{rng=editor.\+selection.\+get\+Rng();table=dom.\+get\+Parent(rng.\+start\+Container, 'table');{\bf if}(table \&\&editor.\+get\+Body().first\+Child==table)\{{\bf if}(is\+At\+Start(rng, table))\{rng=dom.\+create\+Rng();rng.\+set\+Start\+Before(table);rng.\+set\+End\+Before(table);editor.\+selection.\+set\+Rng(rng);e.\+prevent\+Default();\}\}\}\});\}function fix\+Table\+Caret\+Pos()\{{\bf editor.\+on}('Key\+Down Set\+Content Visual\+Aid', function()\{var last;{\bf for}(last=editor.\+get\+Body().last\+Child;last;last=last.\+previous\+Sibling)\{{\bf if}(last.\+node\+Type==3)\{{\bf if}(last.\+node\+Value.\+length $>$ 0)\{break;\}\}{\bf else} {\bf if}(last.\+node\+Type==1 \&\&!last.\+get\+Attribute('{\bf data}-\/mce-\/bogus'))\{break;\}\}{\bf if}(last \&\&last.\+node\+Name== 'T\+A\+B\+L\+E')\{{\bf if}(editor.\+settings.\+forced\+\_\+root\+\_\+block)\{{\bf editor.\+dom.\+add}(editor.\+get\+Body(), editor.\+settings.\+forced\+\_\+root\+\_\+block, editor.\+settings.\+forced\+\_\+root\+\_\+block\+\_\+attrs, {\bf Env.\+ie} \&\&{\bf Env.\+ie}$<$ 11? '\&nbsp;'\+: '$<$ br {\bf data}-\/mce-\/bogus=\char`\"{}1\char`\"{}/$>$');\}{\bf else}\{{\bf editor.\+dom.\+add}(editor.\+get\+Body(), 'br',\{'{\bf data}-\/mce-\/bogus'\+: '1'\});\}\}\});{\bf editor.\+on}('Pre\+Process', function({\bf o})\{var last=o.\+node.\+last\+Child;{\bf if}(last \&\&(last.\+node\+Name==\char`\"{}B\+R\char`\"{}$\vert$$\vert$(last.\+child\+Nodes.\+length==1 \&\&(last.\+first\+Child.\+node\+Name== 'B\+R'$\vert$$\vert$last.\+first\+Child.\+node\+Value== '\textbackslash{}u00a0')))\&\&last.\+previous\+Sibling \&\&last.\+previous\+Sibling.\+node\+Name==\char`\"{}T\+A\+B\+L\+E\char`\"{})\{editor.\+dom.\+remove(last);\}\});\}function fix\+Table\+Cell\+Selection()\{function table\+Cell\+Selected(ed, rng, {\bf n}, current\+Cell)\{var T\+E\+X\+T\+\_\+\+N\+O\+D\+E=3, table=ed.\+dom.\+get\+Parent(rng.\+start\+Container, 'T\+A\+B\+L\+E');var table\+Parent, all\+Of\+Cell\+Selected, table\+Cell\+Selection;{\bf if}(table)\{table\+Parent=table.\+parent\+Node;\}all\+Of\+Cell\+Selected=rng.\+start\+Container.\+node\+Type==T\+E\+X\+T\+\_\+\+N\+O\+D\+E \&\&rng.\+start\+Offset===0 \&\&rng.\+end\+Offset===0 \&\&current\+Cell \&\&(n.\+node\+Name==\char`\"{}T\+R\char`\"{}$\vert$$\vert$n==table\+Parent);table\+Cell\+Selection=(n.\+node\+Name==\char`\"{}T\+D\char`\"{}$\vert$$\vert$n.\+node\+Name==\char`\"{}T\+H\char`\"{})\&\&!current\+Cell;return all\+Of\+Cell\+Selected$\vert$$\vert$table\+Cell\+Selection;\}function fix\+Selection()\{var rng=editor.\+selection.\+get\+Rng();var {\bf n}=editor.\+selection.\+get\+Node();var current\+Cell=editor.\+dom.\+get\+Parent(rng.\+start\+Container, 'T\+D, T\+H');{\bf if}(!table\+Cell\+Selected(editor, rng, {\bf n}, current\+Cell))\{return;\}{\bf if}(!current\+Cell)\{current\+Cell={\bf n};\}var end=current\+Cell.\+last\+Child;{\bf while}(end.\+last\+Child)\{end=end.\+last\+Child;\}rng.\+set\+End(end, end.\+node\+Value.\+length);editor.\+selection.\+set\+Rng(rng);\}{\bf editor.\+on}('Key\+Down', function()\{fix\+Selection();\});{\bf editor.\+on}('Mouse\+Down', function({\bf e})\{{\bf if}(e.\+button!=2)\{fix\+Selection();\}\});\}{\bf if}(Env.\+webkit)\{move\+Web\+Kit\+Selection();fix\+Table\+Cell\+Selection();\}{\bf if}(Env.\+gecko)\{fix\+Before\+Table\+Caret\+Bug();fix\+Table\+Caret\+Pos();\}{\bf if}({\bf Env.\+ie} $>$ 10)\{fix\+Before\+Table\+Caret\+Bug();fix\+Table\+Caret\+Pos();\}\};\}}]{}
\end{DoxyParamCaption}
)}}\label{plugins_2table_2classes_2_quirks_8js_ae4ce1ee13cfe9e9697754ba99fc0a369}

\begin{DoxyParams}{Parameters}
{\em function(\+V\+K,Env,Tools)\{var} & each=Tools.\+each;function get\+Span\+Val(td, name)\{return parse\+Int(td.\+get\+Attribute(name)$\vert$$\vert$1, 10);\}return function(editor)\{function move\+Web\+Kit\+Selection()\{function event\+Handler(e)\{var key=e.\+key\+Code;function handle(up\+Bool, source\+Node)\{var sibling\+Direction=up\+Bool? 'previous\+Sibling'\+: 'next\+Sibling';var current\+Row=editor.\+dom.\+get\+Parent(source\+Node, 'tr');var sibling\+Row=current\+Row\mbox{[}sibling\+Direction\mbox{]};if(sibling\+Row)\{move\+Cursor\+To\+Row(editor, source\+Node, sibling\+Row, up\+Bool);e.\+prevent\+Default();return true;\}else\{var table\+Node=editor.\+dom.\+get\+Parent(current\+Row, 'table');var middle\+Node=current\+Row.\+parent\+Node;var parent\+Node\+Name=middle\+Node.\+node\+Name.\+to\+Lower\+Case();if(parent\+Node\+Name=== 'tbody'$\vert$$\vert$parent\+Node\+Name===(up\+Bool? 'tfoot'\+: 'thead'))\{var target\+Parent=get\+Target\+Parent(up\+Bool, table\+Node, middle\+Node, 'tbody');if(target\+Parent!==null)\{return move\+To\+Row\+In\+Target(up\+Bool, target\+Parent, source\+Node);\}\}return escape\+Table(up\+Bool, current\+Row, sibling\+Direction, table\+Node);\}\}function get\+Target\+Parent(up\+Bool, top\+Node, second\+Node, node\+Name)\{var tbodies=editor.\+dom.\+select('$>$'+node\+Name, top\+Node);var position=tbodies.\+index\+Of(second\+Node);if(up\+Bool \&\&position===0$\vert$$\vert$!up\+Bool \&\&position===tbodies.\+length-\/1)\{return get\+First\+Head\+Or\+Foot(up\+Bool, top\+Node);\}else if(position===-\/1)\{var top\+Or\+Bottom=second\+Node.\+tag\+Name.\+to\+Lower\+Case()=== 'thead'?0\+:tbodies.\+length-\/1;return tbodies\mbox{[}top\+Or\+Bottom\mbox{]};\}else\{return tbodies\mbox{[}position+(up\+Bool?-\/1\+:1)\mbox{]};\}\}function get\+First\+Head\+Or\+Foot(up\+Bool, parent)\{var tag\+Name=up\+Bool? 'thead'\+: 'tfoot';var head\+Or\+Foot=editor.\+dom.\+select('$>$'+tag\+Name, parent);return head\+Or\+Foot.\+length!==0?head\+Or\+Foot\mbox{[}0\mbox{]}\+:null;\}function move\+To\+Row\+In\+Target(up\+Bool, target\+Parent, source\+Node)\{var target\+Row=get\+Child\+For\+Direction(target\+Parent, up\+Bool);if(target\+Row)\{move\+Cursor\+To\+Row(editor, source\+Node, target\+Row, up\+Bool);\}e.\+prevent\+Default();return true;\}function escape\+Table(up\+Bool, current\+Row, sibling\+Direction, table)\{var table\+Sibling=table\mbox{[}sibling\+Direction\mbox{]};if(table\+Sibling)\{move\+Cursor\+To\+Start\+Of\+Element(table\+Sibling);return true;\}else\{var parent\+Cell=editor.\+dom.\+get\+Parent(table, 'td, th');if(parent\+Cell)\{return handle(up\+Bool, parent\+Cell, e);\}else\{var back\+Up\+Sibling=get\+Child\+For\+Direction(current\+Row,!up\+Bool);move\+Cursor\+To\+Start\+Of\+Element(back\+Up\+Sibling);e.\+prevent\+Default();return false;\}\}\}function get\+Child\+For\+Direction(parent, up)\{var child=parent \&\&parent\mbox{[}up? 'last\+Child'\+: 'first\+Child'\mbox{]};return child \&\&child.\+node\+Name=== 'B\+R'?editor.\+dom.\+get\+Parent(child, 'td, th')\+:child;\}function move\+Cursor\+To\+Start\+Of\+Element(n)\{editor.\+selection.\+set\+Cursor\+Location(n, 0);\}function is\+Vertical\+Movement()\{return key==V\+K.\+U\+P$\vert$$\vert$key==V\+K.\+D\+O\+W\+N;\}function is\+In\+Table(editor)\{var node=editor.\+selection.\+get\+Node();var current\+Row=editor.\+dom.\+get\+Parent(node, 'tr');return current\+Row!==null;\}function column\+Index(column)\{var col\+Index=0;var c=column;while(c.\+previous\+Sibling)\{c=c.\+previous\+Sibling;col\+Index=col\+Index+get\+Span\+Val(c,\char`\"{}colspan\char`\"{});\}return col\+Index;\}function find\+Column(row\+Element, column\+Index)\{var c=0, r=0;each(row\+Element.\+children, function(cell, i)\{c=c+get\+Span\+Val(cell,\char`\"{}colspan\char`\"{});r=i;if(c $>$ column\+Index)\{return false;\}\});return r;\}function move\+Cursor\+To\+Row(ed, node, row, up\+Bool)\{var src\+Column\+Index=column\+Index(editor.\+dom.\+get\+Parent(node, 'td, th'));var tgt\+Column\+Index=find\+Column(row, src\+Column\+Index);var tgt\+Node=row.\+child\+Nodes\mbox{[}tgt\+Column\+Index\mbox{]};var row\+Cell\+Target=get\+Child\+For\+Direction(tgt\+Node, up\+Bool);move\+Cursor\+To\+Start\+Of\+Element(row\+Cell\+Target$\vert$$\vert$tgt\+Node);\}function should\+Fix\+Caret(pre\+Browser\+Node)\{var new\+Node=editor.\+selection.\+get\+Node();var new\+Parent=editor.\+dom.\+get\+Parent(new\+Node, 'td, th');var old\+Parent=editor.\+dom.\+get\+Parent(pre\+Browser\+Node, 'td, th');return new\+Parent \&\&new\+Parent!==old\+Parent \&\&check\+Same\+Parent\+Table(new\+Parent, old\+Parent);\}function check\+Same\+Parent\+Table(node\+One, Node\+Two)\{return editor.\+dom.\+get\+Parent(node\+One, 'T\+A\+B\+L\+E')===editor.\+dom.\+get\+Parent(Node\+Two, 'T\+A\+B\+L\+E');\}if(is\+Vertical\+Movement()\&\&is\+In\+Table(editor))\{var pre\+Browser\+Node=editor.\+selection.\+get\+Node();set\+Timeout(function()\{if(should\+Fix\+Caret(pre\+Browser\+Node))\{handle(!e.shift\+Key \&\&key===V\+K.\+U\+P, pre\+Browser\+Node, e);\}\}, 0);\}\}editor.\+on('Key\+Down', function(e)\{event\+Handler(e);\});\}function fix\+Before\+Table\+Caret\+Bug()\{function is\+At\+Start(rng, par)\{var doc=par.\+owner\+Document, rng2=doc.\+create\+Range(), elm;rng2.\+set\+Start\+Before(par);rng2.\+set\+End(rng.\+end\+Container, rng.\+end\+Offset);elm=doc.\+create\+Element('body');elm.\+append\+Child(rng2.\+clone\+Contents());return elm.\+inner\+H\+T\+M\+L.\+replace(/$<$(br$\vert$img$\vert$object$\vert$embed$\vert$input$\vert$textarea)\mbox{[}$^\wedge$$>$\mbox{]}$\ast$ $>$/gi, '-\/').replace(/$<$\mbox{[}$^\wedge$$>$\mbox{]}+$>$/g, '').length===0;\}editor.\+on('Key\+Down', function(e)\{var rng, table, dom=editor.\+dom;if(e.\+key\+Code==37$\vert$$\vert$e.key\+Code==38)\{rng=editor.\+selection.\+get\+Rng();table=dom.\+get\+Parent(rng.\+start\+Container, 'table');if(table \&\&editor.\+get\+Body().first\+Child==table)\{if(is\+At\+Start(rng, table))\{rng=dom.\+create\+Rng();rng.\+set\+Start\+Before(table);rng.\+set\+End\+Before(table);editor.\+selection.\+set\+Rng(rng);e.\+prevent\+Default();\}\}\}\});\}function fix\+Table\+Caret\+Pos()\{editor.\+on('Key\+Down Set\+Content Visual\+Aid', function()\{var last;for(last=editor.\+get\+Body().last\+Child;last;last=last.\+previous\+Sibling)\{if(last.\+node\+Type==3)\{if(last.\+node\+Value.\+length $>$ 0)\{break;\}\}else if(last.\+node\+Type==1 \&\&!last.get\+Attribute('data-\/mce-\/bogus'))\{break;\}\}if(last \&\&last.\+node\+Name== 'T\+A\+B\+L\+E')\{if(editor.\+settings.\+forced\+\_\+root\+\_\+block)\{editor.\+dom.\+add(editor.\+get\+Body(), editor.\+settings.\+forced\+\_\+root\+\_\+block, editor.\+settings.\+forced\+\_\+root\+\_\+block\+\_\+attrs, Env.\+ie \&\&Env.\+ie$<$ 11? '~'\+: '$<$ br data-\/mce-\/bogus=\char`\"{}1\char`\"{}/$>$');\}else\{editor.\+dom.\+add(editor.\+get\+Body(), 'br',\{'data-\/mce-\/bogus'\+: '1'\});\}\}\});editor.\+on('Pre\+Process', function(o)\{var last=o.\+node.\+last\+Child;if(last \&\&(last.\+node\+Name==\char`\"{}\+B\+R\char`\"{}$\vert$$\vert$(last.\+child\+Nodes.\+length==1 \&\&(last.\+first\+Child.\+node\+Name== 'B\+R'$\vert$$\vert$last.first\+Child.\+node\+Value== '')))\&\&last.\+previous\+Sibling \&\&last.\+previous\+Sibling.\+node\+Name==\char`\"{}\+T\+A\+B\+L\+E\char`\"{})\{editor.\+dom.\+remove(last);\}\});\}function fix\+Table\+Cell\+Selection()\{function table\+Cell\+Selected(ed, rng, n, current\+Cell)\{var T\+E\+X\+T\+\_\+\+N\+O\+D\+E=3, table=ed.\+dom.\+get\+Parent(rng.\+start\+Container, 'T\+A\+B\+L\+E');var table\+Parent, all\+Of\+Cell\+Selected, table\+Cell\+Selection;if(table)\{table\+Parent=table.\+parent\+Node;\}all\+Of\+Cell\+Selected=rng.\+start\+Container.\+node\+Type==T\+E\+X\+T\+\_\+\+N\+O\+D\+E \&\&rng.\+start\+Offset===0 \&\&rng.\+end\+Offset===0 \&\&current\+Cell \&\&(n.\+node\+Name==\char`\"{}\+T\+R\char`\"{}$\vert$$\vert$n==table\+Parent);table\+Cell\+Selection=(n.\+node\+Name==\char`\"{}\+T\+D\char`\"{}$\vert$$\vert$n.node\+Name==\char`\"{}\+T\+H\char`\"{})\&\&!current\+Cell;return all\+Of\+Cell\+Selected$\vert$$\vert$table\+Cell\+Selection;\}function fix\+Selection()\{var rng=editor.\+selection.\+get\+Rng();var n=editor.\+selection.\+get\+Node();var current\+Cell=editor.\+dom.\+get\+Parent(rng.\+start\+Container, 'T\+D, T\+H');if(!table\+Cell\+Selected(editor, rng, n, current\+Cell))\{return;\}if(!current\+Cell)\{current\+Cell=n;\}var end=current\+Cell.\+last\+Child;while(end.\+last\+Child)\{end=end.\+last\+Child;\}rng.\+set\+End(end, end.\+node\+Value.\+length);editor.\+selection.\+set\+Rng(rng);\}editor.\+on('Key\+Down', function()\{fix\+Selection();\});editor.\+on('Mouse\+Down', function(e)\{if(e.\+button!=2)\{fix\+Selection();\}\});\}if(Env.\+webkit)\{move\+Web\+Kit\+Selection();fix\+Table\+Cell\+Selection();\}if(Env.\+gecko)\{fix\+Before\+Table\+Caret\+Bug();fix\+Table\+Caret\+Pos();\}if(Env.\+ie $>$ 10)\{fix\+Before\+Table\+Caret\+Bug();fix\+Table\+Caret\+Pos();\}\};\} Fixed caret movement around tables on Web\+Kit. \\
\hline
\end{DoxyParams}
