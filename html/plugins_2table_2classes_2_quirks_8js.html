<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.7"/>
<title>singerfrance.com: src/AcmeGroup/LaboBundle/Resources/public/js/tinymce/plugins/table/classes/Quirks.js File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">singerfrance.com
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.7 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_e8c8e960511e2fc9a2285c26ffe103b3.html">src</a></li><li class="navelem"><a class="el" href="dir_8e24a62f8e05e1ad729af286ae0efb38.html">AcmeGroup</a></li><li class="navelem"><a class="el" href="dir_3c3da10e273bb183886e43a78fd60791.html">LaboBundle</a></li><li class="navelem"><a class="el" href="dir_69bdc8d5745e5f031f5a949defeb3fd7.html">Resources</a></li><li class="navelem"><a class="el" href="dir_a5e9f40a6b65c04710ddc86d685073d9.html">public</a></li><li class="navelem"><a class="el" href="dir_eaf7efb268cacf2520f7cf90a7c721f0.html">js</a></li><li class="navelem"><a class="el" href="dir_76ae24136a0d00551584ac5fd47b39ae.html">tinymce</a></li><li class="navelem"><a class="el" href="dir_f2f4dacd72ab839dfbfe0ee00273cf4b.html">plugins</a></li><li class="navelem"><a class="el" href="dir_3073656667aa86bbea18c7d68d12e95f.html">table</a></li><li class="navelem"><a class="el" href="dir_28354ca05ff18b311a3c6d6843031500.html">classes</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Quirks.js File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ae4ce1ee13cfe9e9697754ba99fc0a369"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="plugins_2table_2classes_2_quirks_8js.html#ae4ce1ee13cfe9e9697754ba99fc0a369">define</a> (&quot;tinymce/tableplugin/Quirks&quot;, [&quot;<a class="el" href="legacyoutput_2plugin_8min_8js.html#a9e0c63e13122add16db57b355b91bbc8">tinymce</a>/util/VK&quot;,&quot;<a class="el" href="legacyoutput_2plugin_8min_8js.html#a9e0c63e13122add16db57b355b91bbc8">tinymce</a>/Env&quot;,&quot;<a class="el" href="legacyoutput_2plugin_8min_8js.html#a9e0c63e13122add16db57b355b91bbc8">tinymce</a>/util/Tools&quot;], function(VK, Env, Tools){var <a class="el" href="fullpage_2plugin_8min_8js.html#a536422939f8cd6b5867a8fb424c3c02e">each</a>=<a class="el" href="fullpage_2plugin_8min_8js.html#a536422939f8cd6b5867a8fb424c3c02e">Tools.each</a>;function getSpanVal(td, name){return parseInt(td.getAttribute(name)||1, 10);}return function(editor){function moveWebKitSelection(){function eventHandler(<a class="el" href="validate_8js.html#acafd152b1d81d2bd0f5775007db75586">e</a>){var key=e.keyCode;function <a class="el" href="jquery_8tooltip_8js.html#a01a575341aa0f5637293fc914c706efd">handle</a>(upBool, sourceNode){var siblingDirection=upBool? 'previousSibling': 'nextSibling';var currentRow=editor.dom.getParent(sourceNode, 'tr');var siblingRow=currentRow[siblingDirection];<a class="el" href="fullpage_2plugin_8js.html#a8b98017e64ef036adb9ae327ff94abe1">if</a>(siblingRow){moveCursorToRow(editor, sourceNode, siblingRow, upBool);e.preventDefault();return true;}<a class="el" href="jquery_8iframe-transport_8js.html#a0544c3fe466e421738dae463968b70ba">else</a>{var tableNode=editor.dom.getParent(currentRow, 'table');var middleNode=currentRow.parentNode;var parentNodeName=middleNode.nodeName.toLowerCase();<a class="el" href="fullpage_2plugin_8js.html#a8b98017e64ef036adb9ae327ff94abe1">if</a>(parentNodeName=== '<a class="el" href="core_8constructor_8js.html#a99b0542c7c50fe8757c55bf9dac5f3be">tbody</a>'||parentNodeName===(upBool? '<a class="el" href="core_8constructor_8js.html#a30c9de8852481ff74ff5dc1f939de464">tfoot</a>': '<a class="el" href="core_8constructor_8js.html#a856be760b6816c9591ce69f0a2b43693">thead</a>')){var targetParent=getTargetParent(upBool, tableNode, middleNode, '<a class="el" href="core_8constructor_8js.html#a99b0542c7c50fe8757c55bf9dac5f3be">tbody</a>');<a class="el" href="fullpage_2plugin_8js.html#a8b98017e64ef036adb9ae327ff94abe1">if</a>(targetParent!==<a class="el" href="validate_8js.html#afb8e110345c45e74478894341ab6b28e">null</a>){return moveToRowInTarget(upBool, targetParent, sourceNode);}}return escapeTable(upBool, currentRow, siblingDirection, tableNode);}}function getTargetParent(upBool, topNode, secondNode, nodeName){var tbodies=<a class="el" href="validate_8js.html#a107b4864f70df98ef4a521c0b2bc80c7">editor.dom.select</a>('&gt;'+nodeName, topNode);var <a class="el" href="jquery-ui_8js.html#a5cd004409a854f3c106e2c3424b89292">position</a>=tbodies.indexOf(secondNode);<a class="el" href="fullpage_2plugin_8js.html#a8b98017e64ef036adb9ae327ff94abe1">if</a>(upBool &amp;&amp;<a class="el" href="jquery-ui_8js.html#a5cd004409a854f3c106e2c3424b89292">position</a>===0||!upBool &amp;&amp;<a class="el" href="jquery-ui_8js.html#a5cd004409a854f3c106e2c3424b89292">position</a>===tbodies.length-1){return getFirstHeadOrFoot(upBool, topNode);}<a class="el" href="jquery_8iframe-transport_8js.html#a0544c3fe466e421738dae463968b70ba">else</a> <a class="el" href="fullpage_2plugin_8js.html#a8b98017e64ef036adb9ae327ff94abe1">if</a>(<a class="el" href="jquery-ui_8js.html#a5cd004409a854f3c106e2c3424b89292">position</a>===-1){var topOrBottom=secondNode.tagName.toLowerCase()=== '<a class="el" href="core_8constructor_8js.html#a856be760b6816c9591ce69f0a2b43693">thead</a>'?0:tbodies.length-1;return tbodies[topOrBottom];}<a class="el" href="jquery_8iframe-transport_8js.html#a0544c3fe466e421738dae463968b70ba">else</a>{return tbodies[<a class="el" href="jquery-ui_8js.html#a5cd004409a854f3c106e2c3424b89292">position</a>+(upBool?-1:1)];}}function getFirstHeadOrFoot(upBool, parent){var <a class="el" href="_j_query_functions_8js.html#ad2e37063c8c2b3db869c735b88473786">tagName</a>=upBool? '<a class="el" href="core_8constructor_8js.html#a856be760b6816c9591ce69f0a2b43693">thead</a>': '<a class="el" href="core_8constructor_8js.html#a30c9de8852481ff74ff5dc1f939de464">tfoot</a>';var headOrFoot=<a class="el" href="validate_8js.html#a107b4864f70df98ef4a521c0b2bc80c7">editor.dom.select</a>('&gt;'+<a class="el" href="_j_query_functions_8js.html#ad2e37063c8c2b3db869c735b88473786">tagName</a>, parent);return headOrFoot.length!==0?headOrFoot[0]:<a class="el" href="validate_8js.html#afb8e110345c45e74478894341ab6b28e">null</a>;}function moveToRowInTarget(upBool, targetParent, sourceNode){var targetRow=getChildForDirection(targetParent, upBool);<a class="el" href="fullpage_2plugin_8js.html#a8b98017e64ef036adb9ae327ff94abe1">if</a>(targetRow){moveCursorToRow(editor, sourceNode, targetRow, upBool);}e.preventDefault();return true;}function escapeTable(upBool, currentRow, siblingDirection, table){var tableSibling=table[siblingDirection];<a class="el" href="fullpage_2plugin_8js.html#a8b98017e64ef036adb9ae327ff94abe1">if</a>(tableSibling){moveCursorToStartOfElement(tableSibling);return true;}<a class="el" href="jquery_8iframe-transport_8js.html#a0544c3fe466e421738dae463968b70ba">else</a>{var parentCell=editor.dom.getParent(table, 'td, th');<a class="el" href="fullpage_2plugin_8js.html#a8b98017e64ef036adb9ae327ff94abe1">if</a>(parentCell){return <a class="el" href="jquery_8tooltip_8js.html#a01a575341aa0f5637293fc914c706efd">handle</a>(upBool, parentCell, <a class="el" href="validate_8js.html#acafd152b1d81d2bd0f5775007db75586">e</a>);}<a class="el" href="jquery_8iframe-transport_8js.html#a0544c3fe466e421738dae463968b70ba">else</a>{var backUpSibling=getChildForDirection(currentRow,!upBool);moveCursorToStartOfElement(backUpSibling);e.preventDefault();return <a class="el" href="validate_8js.html#a5df37b7f02e5cdc7d9412b7f872b8e01">false</a>;}}}function getChildForDirection(parent, up){var child=parent &amp;&amp;parent[up? 'lastChild': 'firstChild'];return child &amp;&amp;child.nodeName=== 'BR'?editor.dom.getParent(child, 'td, th'):child;}function moveCursorToStartOfElement(<a class="el" href="fullpage_2plugin_8min_8js.html#ab767a859d1217315f42c9bb52fc648dc">n</a>){editor.selection.setCursorLocation(<a class="el" href="fullpage_2plugin_8min_8js.html#ab767a859d1217315f42c9bb52fc648dc">n</a>, 0);}function isVerticalMovement(){return key==VK.UP||key==VK.DOWN;}function isInTable(editor){var node=editor.selection.getNode();var currentRow=editor.dom.getParent(node, 'tr');return currentRow!==<a class="el" href="validate_8js.html#afb8e110345c45e74478894341ab6b28e">null</a>;}function columnIndex(column){var colIndex=0;var <a class="el" href="fullpage_2plugin_8min_8js.html#a92587cc54822a9f38871b2d0e0952da1">c</a>=column;<a class="el" href="extras_2_scroller_2media_2data_2server__processing_8php.html#a83084cf6f83823d8593882985353708d">while</a>(c.previousSibling){<a class="el" href="fullpage_2plugin_8min_8js.html#a92587cc54822a9f38871b2d0e0952da1">c</a>=c.previousSibling;colIndex=colIndex+getSpanVal(<a class="el" href="fullpage_2plugin_8min_8js.html#a92587cc54822a9f38871b2d0e0952da1">c</a>,&quot;colspan&quot;);}return colIndex;}function findColumn(rowElement, columnIndex){var <a class="el" href="fullpage_2plugin_8min_8js.html#a92587cc54822a9f38871b2d0e0952da1">c</a>=0, <a class="el" href="jquery_8fancybox_8pack_8js.html#aaa5fef39529cdffdfa257202bb4fda9f">r</a>=0;<a class="el" href="fullpage_2plugin_8min_8js.html#a536422939f8cd6b5867a8fb424c3c02e">each</a>(rowElement.children, function(cell, <a class="el" href="validate_8js.html#a5e25b1d1bed9ab5f3174b76d6a722180">i</a>){<a class="el" href="fullpage_2plugin_8min_8js.html#a92587cc54822a9f38871b2d0e0952da1">c</a>=<a class="el" href="fullpage_2plugin_8min_8js.html#a92587cc54822a9f38871b2d0e0952da1">c</a>+getSpanVal(cell,&quot;colspan&quot;);r=<a class="el" href="validate_8js.html#a5e25b1d1bed9ab5f3174b76d6a722180">i</a>;<a class="el" href="fullpage_2plugin_8js.html#a8b98017e64ef036adb9ae327ff94abe1">if</a>(<a class="el" href="fullpage_2plugin_8min_8js.html#a92587cc54822a9f38871b2d0e0952da1">c</a> &gt; columnIndex){return <a class="el" href="validate_8js.html#a5df37b7f02e5cdc7d9412b7f872b8e01">false</a>;}});return <a class="el" href="jquery_8fancybox_8pack_8js.html#aaa5fef39529cdffdfa257202bb4fda9f">r</a>;}function moveCursorToRow(ed, node, row, upBool){var srcColumnIndex=columnIndex(editor.dom.getParent(node, 'td, th'));var tgtColumnIndex=findColumn(row, srcColumnIndex);var tgtNode=row.childNodes[tgtColumnIndex];var rowCellTarget=getChildForDirection(tgtNode, upBool);moveCursorToStartOfElement(rowCellTarget||tgtNode);}function shouldFixCaret(preBrowserNode){var newNode=editor.selection.getNode();var newParent=editor.dom.getParent(newNode, 'td, th');var oldParent=editor.dom.getParent(preBrowserNode, 'td, th');return newParent &amp;&amp;newParent!==oldParent &amp;&amp;checkSameParentTable(newParent, oldParent);}function checkSameParentTable(nodeOne, NodeTwo){return editor.dom.getParent(nodeOne, 'TABLE')===editor.dom.getParent(NodeTwo, 'TABLE');}<a class="el" href="fullpage_2plugin_8js.html#a8b98017e64ef036adb9ae327ff94abe1">if</a>(isVerticalMovement()&amp;&amp;isInTable(editor)){var preBrowserNode=editor.selection.getNode();setTimeout(function(){<a class="el" href="fullpage_2plugin_8js.html#a8b98017e64ef036adb9ae327ff94abe1">if</a>(shouldFixCaret(preBrowserNode)){<a class="el" href="jquery_8tooltip_8js.html#a01a575341aa0f5637293fc914c706efd">handle</a>(!e.shiftKey &amp;&amp;key===VK.UP, preBrowserNode, <a class="el" href="validate_8js.html#acafd152b1d81d2bd0f5775007db75586">e</a>);}}, 0);}}<a class="el" href="fullpage_2plugin_8min_8js.html#a1cfa98b7fed2aaf9fee3b68dbb7f9497">editor.on</a>('KeyDown', function(<a class="el" href="validate_8js.html#acafd152b1d81d2bd0f5775007db75586">e</a>){eventHandler(<a class="el" href="validate_8js.html#acafd152b1d81d2bd0f5775007db75586">e</a>);});}function fixBeforeTableCaretBug(){function isAtStart(rng, par){var <a class="el" href="outside_events_8js.html#a6966a4bf23931ad4f323b1b8c1e1801f">doc</a>=par.ownerDocument, rng2=doc.createRange(), <a class="el" href="fullpage_2plugin_8js.html#a97a64dfa22b20bcc682327a272b84e73">elm</a>;rng2.setStartBefore(par);rng2.setEnd(rng.endContainer, rng.endOffset);<a class="el" href="fullpage_2plugin_8js.html#a97a64dfa22b20bcc682327a272b84e73">elm</a>=doc.createElement('body');<a class="el" href="jquery-ui_8js.html#a282eb35406abfe6001815a393642b8cb">elm.appendChild</a>(rng2.cloneContents());return elm.innerHTML.replace(/&lt;(br|img|object|embed|<a class="el" href="validate_8js.html#a07a2aabd64594dc36dd810cad2669deb">input</a>|<a class="el" href="validate_8js.html#a7238bc4fc70c702e90c5c654ff465b8d">textarea</a>)[^&gt;]* &gt;/gi, '-').replace(/&lt;[^&gt;]+&gt;/<a class="el" href="fullpage_2plugin_8min_8js.html#a103df269476e78897c9c4c6cb8f4eb06">g</a>, '').length===0;}<a class="el" href="fullpage_2plugin_8min_8js.html#a1cfa98b7fed2aaf9fee3b68dbb7f9497">editor.on</a>('KeyDown', function(<a class="el" href="validate_8js.html#acafd152b1d81d2bd0f5775007db75586">e</a>){var rng, table, dom=editor.dom;<a class="el" href="fullpage_2plugin_8js.html#a8b98017e64ef036adb9ae327ff94abe1">if</a>(e.keyCode==37||e.keyCode==38){rng=editor.selection.getRng();table=dom.getParent(rng.startContainer, 'table');<a class="el" href="fullpage_2plugin_8js.html#a8b98017e64ef036adb9ae327ff94abe1">if</a>(table &amp;&amp;editor.getBody().firstChild==table){<a class="el" href="fullpage_2plugin_8js.html#a8b98017e64ef036adb9ae327ff94abe1">if</a>(isAtStart(rng, table)){rng=dom.createRng();rng.setStartBefore(table);rng.setEndBefore(table);editor.selection.setRng(rng);e.preventDefault();}}}});}function fixTableCaretPos(){<a class="el" href="fullpage_2plugin_8min_8js.html#a1cfa98b7fed2aaf9fee3b68dbb7f9497">editor.on</a>('KeyDown SetContent VisualAid', function(){var last;<a class="el" href="tinymce_8jquery_8dev_8js.html#a4675a875b20881bc5f7011f49fbd4da7">for</a>(last=editor.getBody().lastChild;last;last=last.previousSibling){<a class="el" href="fullpage_2plugin_8js.html#a8b98017e64ef036adb9ae327ff94abe1">if</a>(last.nodeType==3){<a class="el" href="fullpage_2plugin_8js.html#a8b98017e64ef036adb9ae327ff94abe1">if</a>(last.nodeValue.length &gt; 0){break;}}<a class="el" href="jquery_8iframe-transport_8js.html#a0544c3fe466e421738dae463968b70ba">else</a> <a class="el" href="fullpage_2plugin_8js.html#a8b98017e64ef036adb9ae327ff94abe1">if</a>(last.nodeType==1 &amp;&amp;!last.getAttribute('<a class="el" href="fullpage_2plugin_8js.html#a718c1bf5a3bf21ebb980203b142e5b75">data</a>-mce-bogus')){break;}}<a class="el" href="fullpage_2plugin_8js.html#a8b98017e64ef036adb9ae327ff94abe1">if</a>(last &amp;&amp;last.nodeName== 'TABLE'){<a class="el" href="fullpage_2plugin_8js.html#a8b98017e64ef036adb9ae327ff94abe1">if</a>(editor.settings.forced_root_block){<a class="el" href="theme_8min_8js.html#a1833965973c7833716346fa64230bb38">editor.dom.add</a>(editor.getBody(), editor.settings.forced_root_block, editor.settings.forced_root_block_attrs, <a class="el" href="jquery-ui_8js.html#a7434fb8cf6da72f87b732a8a052232a3">Env.ie</a> &amp;&amp;<a class="el" href="jquery-ui_8js.html#a7434fb8cf6da72f87b732a8a052232a3">Env.ie</a>&lt; 11? '&amp;nbsp;': '&lt; br <a class="el" href="fullpage_2plugin_8js.html#a718c1bf5a3bf21ebb980203b142e5b75">data</a>-mce-bogus=&quot;1&quot;/&gt;');}<a class="el" href="jquery_8iframe-transport_8js.html#a0544c3fe466e421738dae463968b70ba">else</a>{<a class="el" href="theme_8min_8js.html#a1833965973c7833716346fa64230bb38">editor.dom.add</a>(editor.getBody(), 'br',{'<a class="el" href="fullpage_2plugin_8js.html#a718c1bf5a3bf21ebb980203b142e5b75">data</a>-mce-bogus': '1'});}}});<a class="el" href="fullpage_2plugin_8min_8js.html#a1cfa98b7fed2aaf9fee3b68dbb7f9497">editor.on</a>('PreProcess', function(<a class="el" href="fullpage_2plugin_8min_8js.html#a4afc7c854f61c136d7bcfa8997651b88">o</a>){var last=o.node.lastChild;<a class="el" href="fullpage_2plugin_8js.html#a8b98017e64ef036adb9ae327ff94abe1">if</a>(last &amp;&amp;(last.nodeName==&quot;BR&quot;||(last.childNodes.length==1 &amp;&amp;(last.firstChild.nodeName== 'BR'||last.firstChild.nodeValue== '\u00a0')))&amp;&amp;last.previousSibling &amp;&amp;last.previousSibling.nodeName==&quot;TABLE&quot;){editor.dom.remove(last);}});}function fixTableCellSelection(){function tableCellSelected(ed, rng, <a class="el" href="fullpage_2plugin_8min_8js.html#ab767a859d1217315f42c9bb52fc648dc">n</a>, currentCell){var TEXT_NODE=3, table=ed.dom.getParent(rng.startContainer, 'TABLE');var tableParent, allOfCellSelected, tableCellSelection;<a class="el" href="fullpage_2plugin_8js.html#a8b98017e64ef036adb9ae327ff94abe1">if</a>(table){tableParent=table.parentNode;}allOfCellSelected=rng.startContainer.nodeType==TEXT_NODE &amp;&amp;rng.startOffset===0 &amp;&amp;rng.endOffset===0 &amp;&amp;currentCell &amp;&amp;(n.nodeName==&quot;TR&quot;||n==tableParent);tableCellSelection=(n.nodeName==&quot;TD&quot;||n.nodeName==&quot;TH&quot;)&amp;&amp;!currentCell;return allOfCellSelected||tableCellSelection;}function fixSelection(){var rng=editor.selection.getRng();var <a class="el" href="fullpage_2plugin_8min_8js.html#ab767a859d1217315f42c9bb52fc648dc">n</a>=editor.selection.getNode();var currentCell=editor.dom.getParent(rng.startContainer, 'TD, TH');<a class="el" href="fullpage_2plugin_8js.html#a8b98017e64ef036adb9ae327ff94abe1">if</a>(!tableCellSelected(editor, rng, <a class="el" href="fullpage_2plugin_8min_8js.html#ab767a859d1217315f42c9bb52fc648dc">n</a>, currentCell)){return;}<a class="el" href="fullpage_2plugin_8js.html#a8b98017e64ef036adb9ae327ff94abe1">if</a>(!currentCell){currentCell=<a class="el" href="fullpage_2plugin_8min_8js.html#ab767a859d1217315f42c9bb52fc648dc">n</a>;}var end=currentCell.lastChild;<a class="el" href="extras_2_scroller_2media_2data_2server__processing_8php.html#a83084cf6f83823d8593882985353708d">while</a>(end.lastChild){end=end.lastChild;}rng.setEnd(end, end.nodeValue.length);editor.selection.setRng(rng);}<a class="el" href="fullpage_2plugin_8min_8js.html#a1cfa98b7fed2aaf9fee3b68dbb7f9497">editor.on</a>('KeyDown', function(){fixSelection();});<a class="el" href="fullpage_2plugin_8min_8js.html#a1cfa98b7fed2aaf9fee3b68dbb7f9497">editor.on</a>('MouseDown', function(<a class="el" href="validate_8js.html#acafd152b1d81d2bd0f5775007db75586">e</a>){<a class="el" href="fullpage_2plugin_8js.html#a8b98017e64ef036adb9ae327ff94abe1">if</a>(e.button!=2){fixSelection();}});}<a class="el" href="fullpage_2plugin_8js.html#a8b98017e64ef036adb9ae327ff94abe1">if</a>(Env.webkit){moveWebKitSelection();fixTableCellSelection();}<a class="el" href="fullpage_2plugin_8js.html#a8b98017e64ef036adb9ae327ff94abe1">if</a>(Env.gecko){fixBeforeTableCaretBug();fixTableCaretPos();}<a class="el" href="fullpage_2plugin_8js.html#a8b98017e64ef036adb9ae327ff94abe1">if</a>(<a class="el" href="jquery-ui_8js.html#a7434fb8cf6da72f87b732a8a052232a3">Env.ie</a> &gt; 10){fixBeforeTableCaretBug();fixTableCaretPos();}};})</td></tr>
<tr class="separator:ae4ce1ee13cfe9e9697754ba99fc0a369"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ae4ce1ee13cfe9e9697754ba99fc0a369"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">define </td>
          <td>(</td>
          <td class="paramtype">&quot;tinymce/tableplugin/Quirks&quot;&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">function(VK, Env, Tools){var <a class="el" href="fullpage_2plugin_8min_8js.html#a536422939f8cd6b5867a8fb424c3c02e">each</a>=<a class="el" href="fullpage_2plugin_8min_8js.html#a536422939f8cd6b5867a8fb424c3c02e">Tools.each</a>;function getSpanVal(td, name){return parseInt(td.getAttribute(name)||1, 10);}return function(editor){function moveWebKitSelection(){function eventHandler(<a class="el" href="validate_8js.html#acafd152b1d81d2bd0f5775007db75586">e</a>){var key=e.keyCode;function <a class="el" href="jquery_8tooltip_8js.html#a01a575341aa0f5637293fc914c706efd">handle</a>(upBool, sourceNode){var siblingDirection=upBool? 'previousSibling': 'nextSibling';var currentRow=editor.dom.getParent(sourceNode, 'tr');var siblingRow=currentRow[siblingDirection];<a class="el" href="fullpage_2plugin_8js.html#a8b98017e64ef036adb9ae327ff94abe1">if</a>(siblingRow){moveCursorToRow(editor, sourceNode, siblingRow, upBool);e.preventDefault();return true;}<a class="el" href="jquery_8iframe-transport_8js.html#a0544c3fe466e421738dae463968b70ba">else</a>{var tableNode=editor.dom.getParent(currentRow, 'table');var middleNode=currentRow.parentNode;var parentNodeName=middleNode.nodeName.toLowerCase();<a class="el" href="fullpage_2plugin_8js.html#a8b98017e64ef036adb9ae327ff94abe1">if</a>(parentNodeName=== '<a class="el" href="core_8constructor_8js.html#a99b0542c7c50fe8757c55bf9dac5f3be">tbody</a>'||parentNodeName===(upBool? '<a class="el" href="core_8constructor_8js.html#a30c9de8852481ff74ff5dc1f939de464">tfoot</a>': '<a class="el" href="core_8constructor_8js.html#a856be760b6816c9591ce69f0a2b43693">thead</a>')){var targetParent=getTargetParent(upBool, tableNode, middleNode, '<a class="el" href="core_8constructor_8js.html#a99b0542c7c50fe8757c55bf9dac5f3be">tbody</a>');<a class="el" href="fullpage_2plugin_8js.html#a8b98017e64ef036adb9ae327ff94abe1">if</a>(targetParent!==<a class="el" href="validate_8js.html#afb8e110345c45e74478894341ab6b28e">null</a>){return moveToRowInTarget(upBool, targetParent, sourceNode);}}return escapeTable(upBool, currentRow, siblingDirection, tableNode);}}function getTargetParent(upBool, topNode, secondNode, nodeName){var tbodies=<a class="el" href="validate_8js.html#a107b4864f70df98ef4a521c0b2bc80c7">editor.dom.select</a>('&gt;'+nodeName, topNode);var <a class="el" href="jquery-ui_8js.html#a5cd004409a854f3c106e2c3424b89292">position</a>=tbodies.indexOf(secondNode);<a class="el" href="fullpage_2plugin_8js.html#a8b98017e64ef036adb9ae327ff94abe1">if</a>(upBool &amp;&amp;<a class="el" href="jquery-ui_8js.html#a5cd004409a854f3c106e2c3424b89292">position</a>===0||!upBool &amp;&amp;<a class="el" href="jquery-ui_8js.html#a5cd004409a854f3c106e2c3424b89292">position</a>===tbodies.length-1){return getFirstHeadOrFoot(upBool, topNode);}<a class="el" href="jquery_8iframe-transport_8js.html#a0544c3fe466e421738dae463968b70ba">else</a> <a class="el" href="fullpage_2plugin_8js.html#a8b98017e64ef036adb9ae327ff94abe1">if</a>(<a class="el" href="jquery-ui_8js.html#a5cd004409a854f3c106e2c3424b89292">position</a>===-1){var topOrBottom=secondNode.tagName.toLowerCase()=== '<a class="el" href="core_8constructor_8js.html#a856be760b6816c9591ce69f0a2b43693">thead</a>'?0:tbodies.length-1;return tbodies[topOrBottom];}<a class="el" href="jquery_8iframe-transport_8js.html#a0544c3fe466e421738dae463968b70ba">else</a>{return tbodies[<a class="el" href="jquery-ui_8js.html#a5cd004409a854f3c106e2c3424b89292">position</a>+(upBool?-1:1)];}}function getFirstHeadOrFoot(upBool, parent){var <a class="el" href="_j_query_functions_8js.html#ad2e37063c8c2b3db869c735b88473786">tagName</a>=upBool? '<a class="el" href="core_8constructor_8js.html#a856be760b6816c9591ce69f0a2b43693">thead</a>': '<a class="el" href="core_8constructor_8js.html#a30c9de8852481ff74ff5dc1f939de464">tfoot</a>';var headOrFoot=<a class="el" href="validate_8js.html#a107b4864f70df98ef4a521c0b2bc80c7">editor.dom.select</a>('&gt;'+<a class="el" href="_j_query_functions_8js.html#ad2e37063c8c2b3db869c735b88473786">tagName</a>, parent);return headOrFoot.length!==0?headOrFoot[0]:<a class="el" href="validate_8js.html#afb8e110345c45e74478894341ab6b28e">null</a>;}function moveToRowInTarget(upBool, targetParent, sourceNode){var targetRow=getChildForDirection(targetParent, upBool);<a class="el" href="fullpage_2plugin_8js.html#a8b98017e64ef036adb9ae327ff94abe1">if</a>(targetRow){moveCursorToRow(editor, sourceNode, targetRow, upBool);}e.preventDefault();return true;}function escapeTable(upBool, currentRow, siblingDirection, table){var tableSibling=table[siblingDirection];<a class="el" href="fullpage_2plugin_8js.html#a8b98017e64ef036adb9ae327ff94abe1">if</a>(tableSibling){moveCursorToStartOfElement(tableSibling);return true;}<a class="el" href="jquery_8iframe-transport_8js.html#a0544c3fe466e421738dae463968b70ba">else</a>{var parentCell=editor.dom.getParent(table, 'td, th');<a class="el" href="fullpage_2plugin_8js.html#a8b98017e64ef036adb9ae327ff94abe1">if</a>(parentCell){return <a class="el" href="jquery_8tooltip_8js.html#a01a575341aa0f5637293fc914c706efd">handle</a>(upBool, parentCell, <a class="el" href="validate_8js.html#acafd152b1d81d2bd0f5775007db75586">e</a>);}<a class="el" href="jquery_8iframe-transport_8js.html#a0544c3fe466e421738dae463968b70ba">else</a>{var backUpSibling=getChildForDirection(currentRow,!upBool);moveCursorToStartOfElement(backUpSibling);e.preventDefault();return <a class="el" href="validate_8js.html#a5df37b7f02e5cdc7d9412b7f872b8e01">false</a>;}}}function getChildForDirection(parent, up){var child=parent &amp;&amp;parent[up? 'lastChild': 'firstChild'];return child &amp;&amp;child.nodeName=== 'BR'?editor.dom.getParent(child, 'td, th'):child;}function moveCursorToStartOfElement(<a class="el" href="fullpage_2plugin_8min_8js.html#ab767a859d1217315f42c9bb52fc648dc">n</a>){editor.selection.setCursorLocation(<a class="el" href="fullpage_2plugin_8min_8js.html#ab767a859d1217315f42c9bb52fc648dc">n</a>, 0);}function isVerticalMovement(){return key==VK.UP||key==VK.DOWN;}function isInTable(editor){var node=editor.selection.getNode();var currentRow=editor.dom.getParent(node, 'tr');return currentRow!==<a class="el" href="validate_8js.html#afb8e110345c45e74478894341ab6b28e">null</a>;}function columnIndex(column){var colIndex=0;var <a class="el" href="fullpage_2plugin_8min_8js.html#a92587cc54822a9f38871b2d0e0952da1">c</a>=column;<a class="el" href="extras_2_scroller_2media_2data_2server__processing_8php.html#a83084cf6f83823d8593882985353708d">while</a>(c.previousSibling){<a class="el" href="fullpage_2plugin_8min_8js.html#a92587cc54822a9f38871b2d0e0952da1">c</a>=c.previousSibling;colIndex=colIndex+getSpanVal(<a class="el" href="fullpage_2plugin_8min_8js.html#a92587cc54822a9f38871b2d0e0952da1">c</a>,&quot;colspan&quot;);}return colIndex;}function findColumn(rowElement, columnIndex){var <a class="el" href="fullpage_2plugin_8min_8js.html#a92587cc54822a9f38871b2d0e0952da1">c</a>=0, <a class="el" href="jquery_8fancybox_8pack_8js.html#aaa5fef39529cdffdfa257202bb4fda9f">r</a>=0;<a class="el" href="fullpage_2plugin_8min_8js.html#a536422939f8cd6b5867a8fb424c3c02e">each</a>(rowElement.children, function(cell, <a class="el" href="validate_8js.html#a5e25b1d1bed9ab5f3174b76d6a722180">i</a>){<a class="el" href="fullpage_2plugin_8min_8js.html#a92587cc54822a9f38871b2d0e0952da1">c</a>=<a class="el" href="fullpage_2plugin_8min_8js.html#a92587cc54822a9f38871b2d0e0952da1">c</a>+getSpanVal(cell,&quot;colspan&quot;);r=<a class="el" href="validate_8js.html#a5e25b1d1bed9ab5f3174b76d6a722180">i</a>;<a class="el" href="fullpage_2plugin_8js.html#a8b98017e64ef036adb9ae327ff94abe1">if</a>(<a class="el" href="fullpage_2plugin_8min_8js.html#a92587cc54822a9f38871b2d0e0952da1">c</a> &gt; columnIndex){return <a class="el" href="validate_8js.html#a5df37b7f02e5cdc7d9412b7f872b8e01">false</a>;}});return <a class="el" href="jquery_8fancybox_8pack_8js.html#aaa5fef39529cdffdfa257202bb4fda9f">r</a>;}function moveCursorToRow(ed, node, row, upBool){var srcColumnIndex=columnIndex(editor.dom.getParent(node, 'td, th'));var tgtColumnIndex=findColumn(row, srcColumnIndex);var tgtNode=row.childNodes[tgtColumnIndex];var rowCellTarget=getChildForDirection(tgtNode, upBool);moveCursorToStartOfElement(rowCellTarget||tgtNode);}function shouldFixCaret(preBrowserNode){var newNode=editor.selection.getNode();var newParent=editor.dom.getParent(newNode, 'td, th');var oldParent=editor.dom.getParent(preBrowserNode, 'td, th');return newParent &amp;&amp;newParent!==oldParent &amp;&amp;checkSameParentTable(newParent, oldParent);}function checkSameParentTable(nodeOne, NodeTwo){return editor.dom.getParent(nodeOne, 'TABLE')===editor.dom.getParent(NodeTwo, 'TABLE');}<a class="el" href="fullpage_2plugin_8js.html#a8b98017e64ef036adb9ae327ff94abe1">if</a>(isVerticalMovement()&amp;&amp;isInTable(editor)){var preBrowserNode=editor.selection.getNode();setTimeout(function(){<a class="el" href="fullpage_2plugin_8js.html#a8b98017e64ef036adb9ae327ff94abe1">if</a>(shouldFixCaret(preBrowserNode)){<a class="el" href="jquery_8tooltip_8js.html#a01a575341aa0f5637293fc914c706efd">handle</a>(!e.shiftKey &amp;&amp;key===VK.UP, preBrowserNode, <a class="el" href="validate_8js.html#acafd152b1d81d2bd0f5775007db75586">e</a>);}}, 0);}}<a class="el" href="fullpage_2plugin_8min_8js.html#a1cfa98b7fed2aaf9fee3b68dbb7f9497">editor.on</a>('KeyDown', function(<a class="el" href="validate_8js.html#acafd152b1d81d2bd0f5775007db75586">e</a>){eventHandler(<a class="el" href="validate_8js.html#acafd152b1d81d2bd0f5775007db75586">e</a>);});}function fixBeforeTableCaretBug(){function isAtStart(rng, par){var <a class="el" href="outside_events_8js.html#a6966a4bf23931ad4f323b1b8c1e1801f">doc</a>=par.ownerDocument, rng2=doc.createRange(), <a class="el" href="fullpage_2plugin_8js.html#a97a64dfa22b20bcc682327a272b84e73">elm</a>;rng2.setStartBefore(par);rng2.setEnd(rng.endContainer, rng.endOffset);<a class="el" href="fullpage_2plugin_8js.html#a97a64dfa22b20bcc682327a272b84e73">elm</a>=doc.createElement('body');<a class="el" href="jquery-ui_8js.html#a282eb35406abfe6001815a393642b8cb">elm.appendChild</a>(rng2.cloneContents());return elm.innerHTML.replace(/&lt;(br|img|object|embed|<a class="el" href="validate_8js.html#a07a2aabd64594dc36dd810cad2669deb">input</a>|<a class="el" href="validate_8js.html#a7238bc4fc70c702e90c5c654ff465b8d">textarea</a>)[^&gt;]* &gt;/gi, '-').replace(/&lt;[^&gt;]+&gt;/<a class="el" href="fullpage_2plugin_8min_8js.html#a103df269476e78897c9c4c6cb8f4eb06">g</a>, '').length===0;}<a class="el" href="fullpage_2plugin_8min_8js.html#a1cfa98b7fed2aaf9fee3b68dbb7f9497">editor.on</a>('KeyDown', function(<a class="el" href="validate_8js.html#acafd152b1d81d2bd0f5775007db75586">e</a>){var rng, table, dom=editor.dom;<a class="el" href="fullpage_2plugin_8js.html#a8b98017e64ef036adb9ae327ff94abe1">if</a>(e.keyCode==37||e.keyCode==38){rng=editor.selection.getRng();table=dom.getParent(rng.startContainer, 'table');<a class="el" href="fullpage_2plugin_8js.html#a8b98017e64ef036adb9ae327ff94abe1">if</a>(table &amp;&amp;editor.getBody().firstChild==table){<a class="el" href="fullpage_2plugin_8js.html#a8b98017e64ef036adb9ae327ff94abe1">if</a>(isAtStart(rng, table)){rng=dom.createRng();rng.setStartBefore(table);rng.setEndBefore(table);editor.selection.setRng(rng);e.preventDefault();}}}});}function fixTableCaretPos(){<a class="el" href="fullpage_2plugin_8min_8js.html#a1cfa98b7fed2aaf9fee3b68dbb7f9497">editor.on</a>('KeyDown SetContent VisualAid', function(){var last;<a class="el" href="tinymce_8jquery_8dev_8js.html#a4675a875b20881bc5f7011f49fbd4da7">for</a>(last=editor.getBody().lastChild;last;last=last.previousSibling){<a class="el" href="fullpage_2plugin_8js.html#a8b98017e64ef036adb9ae327ff94abe1">if</a>(last.nodeType==3){<a class="el" href="fullpage_2plugin_8js.html#a8b98017e64ef036adb9ae327ff94abe1">if</a>(last.nodeValue.length &gt; 0){break;}}<a class="el" href="jquery_8iframe-transport_8js.html#a0544c3fe466e421738dae463968b70ba">else</a> <a class="el" href="fullpage_2plugin_8js.html#a8b98017e64ef036adb9ae327ff94abe1">if</a>(last.nodeType==1 &amp;&amp;!last.getAttribute('<a class="el" href="fullpage_2plugin_8js.html#a718c1bf5a3bf21ebb980203b142e5b75">data</a>-mce-bogus')){break;}}<a class="el" href="fullpage_2plugin_8js.html#a8b98017e64ef036adb9ae327ff94abe1">if</a>(last &amp;&amp;last.nodeName== 'TABLE'){<a class="el" href="fullpage_2plugin_8js.html#a8b98017e64ef036adb9ae327ff94abe1">if</a>(editor.settings.forced_root_block){<a class="el" href="theme_8min_8js.html#a1833965973c7833716346fa64230bb38">editor.dom.add</a>(editor.getBody(), editor.settings.forced_root_block, editor.settings.forced_root_block_attrs, <a class="el" href="jquery-ui_8js.html#a7434fb8cf6da72f87b732a8a052232a3">Env.ie</a> &amp;&amp;<a class="el" href="jquery-ui_8js.html#a7434fb8cf6da72f87b732a8a052232a3">Env.ie</a>&lt; 11? '&amp;nbsp;': '&lt; br <a class="el" href="fullpage_2plugin_8js.html#a718c1bf5a3bf21ebb980203b142e5b75">data</a>-mce-bogus=&quot;1&quot;/&gt;');}<a class="el" href="jquery_8iframe-transport_8js.html#a0544c3fe466e421738dae463968b70ba">else</a>{<a class="el" href="theme_8min_8js.html#a1833965973c7833716346fa64230bb38">editor.dom.add</a>(editor.getBody(), 'br',{'<a class="el" href="fullpage_2plugin_8js.html#a718c1bf5a3bf21ebb980203b142e5b75">data</a>-mce-bogus': '1'});}}});<a class="el" href="fullpage_2plugin_8min_8js.html#a1cfa98b7fed2aaf9fee3b68dbb7f9497">editor.on</a>('PreProcess', function(<a class="el" href="fullpage_2plugin_8min_8js.html#a4afc7c854f61c136d7bcfa8997651b88">o</a>){var last=o.node.lastChild;<a class="el" href="fullpage_2plugin_8js.html#a8b98017e64ef036adb9ae327ff94abe1">if</a>(last &amp;&amp;(last.nodeName==&quot;BR&quot;||(last.childNodes.length==1 &amp;&amp;(last.firstChild.nodeName== 'BR'||last.firstChild.nodeValue== '\u00a0')))&amp;&amp;last.previousSibling &amp;&amp;last.previousSibling.nodeName==&quot;TABLE&quot;){editor.dom.remove(last);}});}function fixTableCellSelection(){function tableCellSelected(ed, rng, <a class="el" href="fullpage_2plugin_8min_8js.html#ab767a859d1217315f42c9bb52fc648dc">n</a>, currentCell){var TEXT_NODE=3, table=ed.dom.getParent(rng.startContainer, 'TABLE');var tableParent, allOfCellSelected, tableCellSelection;<a class="el" href="fullpage_2plugin_8js.html#a8b98017e64ef036adb9ae327ff94abe1">if</a>(table){tableParent=table.parentNode;}allOfCellSelected=rng.startContainer.nodeType==TEXT_NODE &amp;&amp;rng.startOffset===0 &amp;&amp;rng.endOffset===0 &amp;&amp;currentCell &amp;&amp;(n.nodeName==&quot;TR&quot;||n==tableParent);tableCellSelection=(n.nodeName==&quot;TD&quot;||n.nodeName==&quot;TH&quot;)&amp;&amp;!currentCell;return allOfCellSelected||tableCellSelection;}function fixSelection(){var rng=editor.selection.getRng();var <a class="el" href="fullpage_2plugin_8min_8js.html#ab767a859d1217315f42c9bb52fc648dc">n</a>=editor.selection.getNode();var currentCell=editor.dom.getParent(rng.startContainer, 'TD, TH');<a class="el" href="fullpage_2plugin_8js.html#a8b98017e64ef036adb9ae327ff94abe1">if</a>(!tableCellSelected(editor, rng, <a class="el" href="fullpage_2plugin_8min_8js.html#ab767a859d1217315f42c9bb52fc648dc">n</a>, currentCell)){return;}<a class="el" href="fullpage_2plugin_8js.html#a8b98017e64ef036adb9ae327ff94abe1">if</a>(!currentCell){currentCell=<a class="el" href="fullpage_2plugin_8min_8js.html#ab767a859d1217315f42c9bb52fc648dc">n</a>;}var end=currentCell.lastChild;<a class="el" href="extras_2_scroller_2media_2data_2server__processing_8php.html#a83084cf6f83823d8593882985353708d">while</a>(end.lastChild){end=end.lastChild;}rng.setEnd(end, end.nodeValue.length);editor.selection.setRng(rng);}<a class="el" href="fullpage_2plugin_8min_8js.html#a1cfa98b7fed2aaf9fee3b68dbb7f9497">editor.on</a>('KeyDown', function(){fixSelection();});<a class="el" href="fullpage_2plugin_8min_8js.html#a1cfa98b7fed2aaf9fee3b68dbb7f9497">editor.on</a>('MouseDown', function(<a class="el" href="validate_8js.html#acafd152b1d81d2bd0f5775007db75586">e</a>){<a class="el" href="fullpage_2plugin_8js.html#a8b98017e64ef036adb9ae327ff94abe1">if</a>(e.button!=2){fixSelection();}});}<a class="el" href="fullpage_2plugin_8js.html#a8b98017e64ef036adb9ae327ff94abe1">if</a>(Env.webkit){moveWebKitSelection();fixTableCellSelection();}<a class="el" href="fullpage_2plugin_8js.html#a8b98017e64ef036adb9ae327ff94abe1">if</a>(Env.gecko){fixBeforeTableCaretBug();fixTableCaretPos();}<a class="el" href="fullpage_2plugin_8js.html#a8b98017e64ef036adb9ae327ff94abe1">if</a>(<a class="el" href="jquery-ui_8js.html#a7434fb8cf6da72f87b732a8a052232a3">Env.ie</a> &gt; 10){fixBeforeTableCaretBug();fixTableCaretPos();}};}&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">function(VK,Env,Tools){var</td><td>each=Tools.each;function getSpanVal(td, name){return parseInt(td.getAttribute(name)||1, 10);}return function(editor){function moveWebKitSelection(){function eventHandler(e){var key=e.keyCode;function handle(upBool, sourceNode){var siblingDirection=upBool? 'previousSibling': 'nextSibling';var currentRow=editor.dom.getParent(sourceNode, 'tr');var siblingRow=currentRow[siblingDirection];if(siblingRow){moveCursorToRow(editor, sourceNode, siblingRow, upBool);e.preventDefault();return true;}else{var tableNode=editor.dom.getParent(currentRow, 'table');var middleNode=currentRow.parentNode;var parentNodeName=middleNode.nodeName.toLowerCase();if(parentNodeName=== 'tbody'||parentNodeName===(upBool? 'tfoot': 'thead')){var targetParent=getTargetParent(upBool, tableNode, middleNode, 'tbody');if(targetParent!==null){return moveToRowInTarget(upBool, targetParent, sourceNode);}}return escapeTable(upBool, currentRow, siblingDirection, tableNode);}}function getTargetParent(upBool, topNode, secondNode, nodeName){var tbodies=editor.dom.select('&gt;'+nodeName, topNode);var position=tbodies.indexOf(secondNode);if(upBool &amp;&amp;position===0||!upBool &amp;&amp;position===tbodies.length-1){return getFirstHeadOrFoot(upBool, topNode);}else if(position===-1){var topOrBottom=secondNode.tagName.toLowerCase()=== 'thead'?0:tbodies.length-1;return tbodies[topOrBottom];}else{return tbodies[position+(upBool?-1:1)];}}function getFirstHeadOrFoot(upBool, parent){var tagName=upBool? 'thead': 'tfoot';var headOrFoot=editor.dom.select('&gt;'+tagName, parent);return headOrFoot.length!==0?headOrFoot[0]:null;}function moveToRowInTarget(upBool, targetParent, sourceNode){var targetRow=getChildForDirection(targetParent, upBool);if(targetRow){moveCursorToRow(editor, sourceNode, targetRow, upBool);}e.preventDefault();return true;}function escapeTable(upBool, currentRow, siblingDirection, table){var tableSibling=table[siblingDirection];if(tableSibling){moveCursorToStartOfElement(tableSibling);return true;}else{var parentCell=editor.dom.getParent(table, 'td, th');if(parentCell){return handle(upBool, parentCell, e);}else{var backUpSibling=getChildForDirection(currentRow,!upBool);moveCursorToStartOfElement(backUpSibling);e.preventDefault();return false;}}}function getChildForDirection(parent, up){var child=parent &amp;&amp;parent[up? 'lastChild': 'firstChild'];return child &amp;&amp;child.nodeName=== 'BR'?editor.dom.getParent(child, 'td, th'):child;}function moveCursorToStartOfElement(n){editor.selection.setCursorLocation(n, 0);}function isVerticalMovement(){return key==VK.UP||key==VK.DOWN;}function isInTable(editor){var node=editor.selection.getNode();var currentRow=editor.dom.getParent(node, 'tr');return currentRow!==null;}function columnIndex(column){var colIndex=0;var c=column;while(c.previousSibling){c=c.previousSibling;colIndex=colIndex+getSpanVal(c,"colspan");}return colIndex;}function findColumn(rowElement, columnIndex){var c=0, r=0;each(rowElement.children, function(cell, i){c=c+getSpanVal(cell,"colspan");r=i;if(c &gt; columnIndex){return false;}});return r;}function moveCursorToRow(ed, node, row, upBool){var srcColumnIndex=columnIndex(editor.dom.getParent(node, 'td, th'));var tgtColumnIndex=findColumn(row, srcColumnIndex);var tgtNode=row.childNodes[tgtColumnIndex];var rowCellTarget=getChildForDirection(tgtNode, upBool);moveCursorToStartOfElement(rowCellTarget||tgtNode);}function shouldFixCaret(preBrowserNode){var newNode=editor.selection.getNode();var newParent=editor.dom.getParent(newNode, 'td, th');var oldParent=editor.dom.getParent(preBrowserNode, 'td, th');return newParent &amp;&amp;newParent!==oldParent &amp;&amp;checkSameParentTable(newParent, oldParent);}function checkSameParentTable(nodeOne, NodeTwo){return editor.dom.getParent(nodeOne, 'TABLE')===editor.dom.getParent(NodeTwo, 'TABLE');}if(isVerticalMovement()&amp;&amp;isInTable(editor)){var preBrowserNode=editor.selection.getNode();setTimeout(function(){if(shouldFixCaret(preBrowserNode)){handle(!e.shiftKey &amp;&amp;key===VK.UP, preBrowserNode, e);}}, 0);}}editor.on('KeyDown', function(e){eventHandler(e);});}function fixBeforeTableCaretBug(){function isAtStart(rng, par){var doc=par.ownerDocument, rng2=doc.createRange(), elm;rng2.setStartBefore(par);rng2.setEnd(rng.endContainer, rng.endOffset);elm=doc.createElement('body');elm.appendChild(rng2.cloneContents());return elm.innerHTML.replace(/&lt;(br|img|object|embed|input|textarea)[^&gt;]* &gt;/gi, '-').replace(/&lt;[^&gt;]+&gt;/g, '').length===0;}editor.on('KeyDown', function(e){var rng, table, dom=editor.dom;if(e.keyCode==37||e.keyCode==38){rng=editor.selection.getRng();table=dom.getParent(rng.startContainer, 'table');if(table &amp;&amp;editor.getBody().firstChild==table){if(isAtStart(rng, table)){rng=dom.createRng();rng.setStartBefore(table);rng.setEndBefore(table);editor.selection.setRng(rng);e.preventDefault();}}}});}function fixTableCaretPos(){editor.on('KeyDown SetContent VisualAid', function(){var last;for(last=editor.getBody().lastChild;last;last=last.previousSibling){if(last.nodeType==3){if(last.nodeValue.length &gt; 0){break;}}else if(last.nodeType==1 &amp;&amp;!last.getAttribute('data-mce-bogus')){break;}}if(last &amp;&amp;last.nodeName== 'TABLE'){if(editor.settings.forced_root_block){editor.dom.add(editor.getBody(), editor.settings.forced_root_block, editor.settings.forced_root_block_attrs, Env.ie &amp;&amp;Env.ie&lt; 11? '&#160;': '&lt; br data-mce-bogus="1"/&gt;');}else{editor.dom.add(editor.getBody(), 'br',{'data-mce-bogus': '1'});}}});editor.on('PreProcess', function(o){var last=o.node.lastChild;if(last &amp;&amp;(last.nodeName=="BR"||(last.childNodes.length==1 &amp;&amp;(last.firstChild.nodeName== 'BR'||last.firstChild.nodeValue== '')))&amp;&amp;last.previousSibling &amp;&amp;last.previousSibling.nodeName=="TABLE"){editor.dom.remove(last);}});}function fixTableCellSelection(){function tableCellSelected(ed, rng, n, currentCell){var TEXT_NODE=3, table=ed.dom.getParent(rng.startContainer, 'TABLE');var tableParent, allOfCellSelected, tableCellSelection;if(table){tableParent=table.parentNode;}allOfCellSelected=rng.startContainer.nodeType==TEXT_NODE &amp;&amp;rng.startOffset===0 &amp;&amp;rng.endOffset===0 &amp;&amp;currentCell &amp;&amp;(n.nodeName=="TR"||n==tableParent);tableCellSelection=(n.nodeName=="TD"||n.nodeName=="TH")&amp;&amp;!currentCell;return allOfCellSelected||tableCellSelection;}function fixSelection(){var rng=editor.selection.getRng();var n=editor.selection.getNode();var currentCell=editor.dom.getParent(rng.startContainer, 'TD, TH');if(!tableCellSelected(editor, rng, n, currentCell)){return;}if(!currentCell){currentCell=n;}var end=currentCell.lastChild;while(end.lastChild){end=end.lastChild;}rng.setEnd(end, end.nodeValue.length);editor.selection.setRng(rng);}editor.on('KeyDown', function(){fixSelection();});editor.on('MouseDown', function(e){if(e.button!=2){fixSelection();}});}if(Env.webkit){moveWebKitSelection();fixTableCellSelection();}if(Env.gecko){fixBeforeTableCaretBug();fixTableCaretPos();}if(Env.ie &gt; 10){fixBeforeTableCaretBug();fixTableCaretPos();}};} Fixed caret movement around tables on WebKit. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Jun 13 2014 13:09:13 for singerfrance.com by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.7
</small></address>
</body>
</html>
