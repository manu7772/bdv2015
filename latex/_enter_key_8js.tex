\hypertarget{_enter_key_8js}{\section{src/\+Acme\+Group/\+Labo\+Bundle/\+Resources/public/js/tinymce/classes/\+Enter\+Key.js File Reference}
\label{_enter_key_8js}\index{src/\+Acme\+Group/\+Labo\+Bundle/\+Resources/public/js/tinymce/classes/\+Enter\+Key.\+js@{src/\+Acme\+Group/\+Labo\+Bundle/\+Resources/public/js/tinymce/classes/\+Enter\+Key.\+js}}
}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{_enter_key_8js_a8e95fa45d4d85ca4fbf5dc1816aa6ecf}{define} (\char`\"{}tinymce/Enter\+Key\char`\"{}, \mbox{[}\char`\"{}\hyperlink{legacyoutput_2plugin_8min_8js_a9e0c63e13122add16db57b355b91bbc8}{tinymce}/dom/Tree\+Walker\char`\"{},\char`\"{}\hyperlink{legacyoutput_2plugin_8min_8js_a9e0c63e13122add16db57b355b91bbc8}{tinymce}/Env\char`\"{}\mbox{]}, function(Tree\+Walker, Env)\{var is\+I\+E=\hyperlink{jquery-ui_8js_a7434fb8cf6da72f87b732a8a052232a3}{Env.\+ie} \&\&\hyperlink{jquery-ui_8js_a7434fb8cf6da72f87b732a8a052232a3}{Env.\+ie}$<$ 11;return function(editor)\{var dom=editor.\+dom, selection=editor.\+selection, \hyperlink{jquery_8tooltip_8js_a52fb9116a07f71570fbf0bd12ff4c9f8}{settings}=\hyperlink{jquery_8tooltip_8js_a52fb9116a07f71570fbf0bd12ff4c9f8}{editor.\+settings};var undo\+Manager=editor.\+undo\+Manager, schema=editor.\+schema, non\+Empty\+Elements\+Map=schema.\+get\+Non\+Empty\+Elements();function handle\+Enter\+Key(evt)\{var rng=selection.\+get\+Rng(true), tmp\+Rng, editable\+Root, container, \hyperlink{jquery-1_89_81_8js_a4a9f594d20d927164551fc7fa4751a2f}{offset}, parent\+Block, document\+Mode, shift\+Key, new\+Block, fragment, container\+Block, parent\+Block\+Name, container\+Block\+Name, new\+Block\+Name, is\+After\+Last\+Node\+In\+Container;function can\+Split\+Block(node)\{return node \&\&dom.\+is\+Block(node)\&\&!/$^\wedge$(T\+D$\vert$T\+H$\vert$C\+A\+P\+T\+I\+O\+N$\vert$F\+O\+R\+M)\$/.test(node.\+node\+Name)\&\&!/$^\wedge$(fixed$\vert$absolute)/i.\+test(\hyperlink{jquery-ui_8js_a5cd004409a854f3c106e2c3424b89292}{node.\+style.\+position})\&\&dom.\+get\+Content\+Editable(node)!==\char`\"{}true\char`\"{};\}function render\+Block\+On\+I\+E(block)\{var old\+Rng;\hyperlink{fullpage_2plugin_8js_a8b98017e64ef036adb9ae327ff94abe1}{if}(dom.\+is\+Block(block))\{old\+Rng=selection.\+get\+Rng();\hyperlink{jquery-ui_8js_a282eb35406abfe6001815a393642b8cb}{block.\+append\+Child}(dom.\+create('span', \hyperlink{validate_8js_afb8e110345c45e74478894341ab6b28e}{null}, '\textbackslash{}u00a0'));\hyperlink{validate_8js_a107b4864f70df98ef4a521c0b2bc80c7}{selection.\+select}(block);block.\+last\+Child.\+outer\+H\+T\+M\+L= '';selection.\+set\+Rng(old\+Rng);\}\}function trim\+Inline\+Elements\+On\+Left\+Side\+Of\+Block(block)\{var node=block, first\+Childs=\mbox{[}$\,$\mbox{]}, \hyperlink{validate_8js_a5e25b1d1bed9ab5f3174b76d6a722180}{i};\hyperlink{extras_2_scroller_2media_2data_2server__processing_8php_a83084cf6f83823d8593882985353708d}{while}((node=node.\+first\+Child))\{\hyperlink{fullpage_2plugin_8js_a8b98017e64ef036adb9ae327ff94abe1}{if}(dom.\+is\+Block(node))\{return;\}\hyperlink{fullpage_2plugin_8js_a8b98017e64ef036adb9ae327ff94abe1}{if}(node.\+node\+Type==1 \&\&!non\+Empty\+Elements\+Map\mbox{[}node.\+node\+Name.\+to\+Lower\+Case()\mbox{]})\{\hyperlink{core_8constructor_8js_afa3ccdb0f651abf66d93864fc8419c98}{first\+Childs.\+push}(node);\}\}\hyperlink{validate_8js_a5e25b1d1bed9ab5f3174b76d6a722180}{i}=first\+Childs.\+length;\hyperlink{extras_2_scroller_2media_2data_2server__processing_8php_a83084cf6f83823d8593882985353708d}{while}(\hyperlink{validate_8js_a5e25b1d1bed9ab5f3174b76d6a722180}{i}-\/-\/)\{node=first\+Childs\mbox{[}\hyperlink{validate_8js_a5e25b1d1bed9ab5f3174b76d6a722180}{i}\mbox{]};\hyperlink{fullpage_2plugin_8js_a8b98017e64ef036adb9ae327ff94abe1}{if}(!node.\+has\+Child\+Nodes()$\vert$$\vert$(node.\+first\+Child==node.\+last\+Child \&\&node.\+first\+Child.\+node\+Value=== ''))\{\hyperlink{fullpage_2plugin_8min_8js_a3fe72a3812c61d06ea7c5cf2052f3dd2}{dom.\+remove}(node);\}\hyperlink{jquery_8iframe-transport_8js_a0544c3fe466e421738dae463968b70ba}{else}\{\hyperlink{fullpage_2plugin_8js_a8b98017e64ef036adb9ae327ff94abe1}{if}(node.\+node\+Name==\char`\"{}A\char`\"{}\&\&(node.\+inner\+Text$\vert$$\vert$node.\+text\+Content)=== ' ')\{\hyperlink{fullpage_2plugin_8min_8js_a3fe72a3812c61d06ea7c5cf2052f3dd2}{dom.\+remove}(node);\}\}\}\}function move\+To\+Caret\+Position(\hyperlink{jquery_8mobile-1_83_81_8js_a11a10a6834f3c54a5380f4ff04d002a9}{root})\{var walker, node, rng, last\+Node=\hyperlink{jquery_8mobile-1_83_81_8js_a11a10a6834f3c54a5380f4ff04d002a9}{root}, temp\+Elm;function first\+Non\+White\+Space\+Node\+Sibling(node)\{\hyperlink{extras_2_scroller_2media_2data_2server__processing_8php_a83084cf6f83823d8593882985353708d}{while}(node)\{\hyperlink{fullpage_2plugin_8js_a8b98017e64ef036adb9ae327ff94abe1}{if}(node.\+node\+Type==1$\vert$$\vert$(node.\+node\+Type==3 \&\&\hyperlink{fullpage_2plugin_8js_a718c1bf5a3bf21ebb980203b142e5b75}{node.\+data} \&\&/\mbox{[}\textbackslash{}\hyperlink{validate_8js_ae059f217efaf1d50696a1214c3ce5748}{r\textbackslash{}n\textbackslash{}s}\mbox{]}/.test(\hyperlink{fullpage_2plugin_8js_a718c1bf5a3bf21ebb980203b142e5b75}{node.\+data})))\{return node;\}node=node.\+next\+Sibling;\}\}\hyperlink{fullpage_2plugin_8js_a8b98017e64ef036adb9ae327ff94abe1}{if}(\hyperlink{jquery-ui_8js_a7434fb8cf6da72f87b732a8a052232a3}{Env.\+ie} \&\&\hyperlink{jquery-ui_8js_a7434fb8cf6da72f87b732a8a052232a3}{Env.\+ie}$<$ 9 \&\&parent\+Block \&\&parent\+Block.\+first\+Child)\{\hyperlink{fullpage_2plugin_8js_a8b98017e64ef036adb9ae327ff94abe1}{if}(parent\+Block.\+first\+Child==parent\+Block.\+last\+Child \&\&\hyperlink{_j_query_functions_8js_ad2e37063c8c2b3db869c735b88473786}{parent\+Block.\+first\+Child.\+tag\+Name}== 'B\+R')\{\hyperlink{fullpage_2plugin_8min_8js_a3fe72a3812c61d06ea7c5cf2052f3dd2}{dom.\+remove}(parent\+Block.\+first\+Child);\}\}\hyperlink{fullpage_2plugin_8js_a8b98017e64ef036adb9ae327ff94abe1}{if}(root.\+node\+Name== 'L\+I')\{var first\+Child=first\+Non\+White\+Space\+Node\+Sibling(root.\+first\+Child);\hyperlink{fullpage_2plugin_8js_a8b98017e64ef036adb9ae327ff94abe1}{if}(first\+Child \&\&/$^\wedge$(U\+L$\vert$O\+L)\$/.test(first\+Child.\+node\+Name))\{\hyperlink{jquery-ui_8js_a98ab1c3e007c3b40a9abc7f02b656401}{root.\+insert\+Before}(dom.\+doc.\+create\+Text\+Node('\textbackslash{}u00a0'), root.\+first\+Child);\}\}rng=dom.\+create\+Rng();\hyperlink{fullpage_2plugin_8js_a8b98017e64ef036adb9ae327ff94abe1}{if}(root.\+has\+Child\+Nodes())\{walker=new Tree\+Walker(\hyperlink{jquery_8mobile-1_83_81_8js_a11a10a6834f3c54a5380f4ff04d002a9}{root}, \hyperlink{jquery_8mobile-1_83_81_8js_a11a10a6834f3c54a5380f4ff04d002a9}{root});\hyperlink{extras_2_scroller_2media_2data_2server__processing_8php_a83084cf6f83823d8593882985353708d}{while}((node=walker.\+current()))\{\hyperlink{fullpage_2plugin_8js_a8b98017e64ef036adb9ae327ff94abe1}{if}(node.\+node\+Type==3)\{rng.\+set\+Start(node, 0);rng.\+set\+End(node, 0);break;\}\hyperlink{fullpage_2plugin_8js_a8b98017e64ef036adb9ae327ff94abe1}{if}(non\+Empty\+Elements\+Map\mbox{[}node.\+node\+Name.\+to\+Lower\+Case()\mbox{]})\{rng.\+set\+Start\+Before(node);rng.\+set\+End\+Before(node);break;\}last\+Node=node;node=walker.\+next();\}\hyperlink{fullpage_2plugin_8js_a8b98017e64ef036adb9ae327ff94abe1}{if}(!node)\{rng.\+set\+Start(last\+Node, 0);rng.\+set\+End(last\+Node, 0);\}\}\hyperlink{jquery_8iframe-transport_8js_a0544c3fe466e421738dae463968b70ba}{else}\{\hyperlink{fullpage_2plugin_8js_a8b98017e64ef036adb9ae327ff94abe1}{if}(root.\+node\+Name== 'B\+R')\{\hyperlink{fullpage_2plugin_8js_a8b98017e64ef036adb9ae327ff94abe1}{if}(root.\+next\+Sibling \&\&dom.\+is\+Block(root.\+next\+Sibling))\{\hyperlink{fullpage_2plugin_8js_a8b98017e64ef036adb9ae327ff94abe1}{if}(!document\+Mode$\vert$$\vert$document\+Mode$<$ 9)\{temp\+Elm=dom.\+create('br');\hyperlink{jquery-ui_8js_a98ab1c3e007c3b40a9abc7f02b656401}{root.\+parent\+Node.\+insert\+Before}(temp\+Elm, \hyperlink{jquery_8mobile-1_83_81_8js_a11a10a6834f3c54a5380f4ff04d002a9}{root});\}rng.\+set\+Start\+Before(\hyperlink{jquery_8mobile-1_83_81_8js_a11a10a6834f3c54a5380f4ff04d002a9}{root});rng.\+set\+End\+Before(\hyperlink{jquery_8mobile-1_83_81_8js_a11a10a6834f3c54a5380f4ff04d002a9}{root});\}\hyperlink{jquery_8iframe-transport_8js_a0544c3fe466e421738dae463968b70ba}{else}\{rng.\+set\+Start\+After(\hyperlink{jquery_8mobile-1_83_81_8js_a11a10a6834f3c54a5380f4ff04d002a9}{root});rng.\+set\+End\+After(\hyperlink{jquery_8mobile-1_83_81_8js_a11a10a6834f3c54a5380f4ff04d002a9}{root});\}\}\hyperlink{jquery_8iframe-transport_8js_a0544c3fe466e421738dae463968b70ba}{else}\{rng.\+set\+Start(\hyperlink{jquery_8mobile-1_83_81_8js_a11a10a6834f3c54a5380f4ff04d002a9}{root}, 0);rng.\+set\+End(\hyperlink{jquery_8mobile-1_83_81_8js_a11a10a6834f3c54a5380f4ff04d002a9}{root}, 0);\}\}selection.\+set\+Rng(rng);\hyperlink{fullpage_2plugin_8min_8js_a3fe72a3812c61d06ea7c5cf2052f3dd2}{dom.\+remove}(temp\+Elm);selection.\+scroll\+Into\+View(\hyperlink{jquery_8mobile-1_83_81_8js_a11a10a6834f3c54a5380f4ff04d002a9}{root});\}function set\+Forced\+Block\+Attrs(node)\{var forced\+Root\+Block\+Name=settings.\+forced\+\_\+root\+\_\+block;\hyperlink{fullpage_2plugin_8js_a8b98017e64ef036adb9ae327ff94abe1}{if}(forced\+Root\+Block\+Name \&\&forced\+Root\+Block\+Name.\+to\+Lower\+Case()===node.\+tag\+Name.\+to\+Lower\+Case())\{\hyperlink{fullpage_2plugin_8min_8js_a7d161a9e201f33c20ddc045115f93fd4}{dom.\+set\+Attribs}(node, settings.\+forced\+\_\+root\+\_\+block\+\_\+attrs);\}\}function create\+New\+Block(name)\{var node=container, block, cloned\+Node, caret\+Node;\hyperlink{fullpage_2plugin_8js_a8b98017e64ef036adb9ae327ff94abe1}{if}(name$\vert$$\vert$parent\+Block\+Name==\char`\"{}T\+A\+B\+L\+E\char`\"{})\{block=dom.\+create(name$\vert$$\vert$new\+Block\+Name);set\+Forced\+Block\+Attrs(block);\}\hyperlink{jquery_8iframe-transport_8js_a0544c3fe466e421738dae463968b70ba}{else}\{block=parent\+Block.\+clone\+Node(\hyperlink{validate_8js_a5df37b7f02e5cdc7d9412b7f872b8e01}{false});\}caret\+Node=block;\hyperlink{fullpage_2plugin_8js_a8b98017e64ef036adb9ae327ff94abe1}{if}(settings.\+keep\+\_\+styles!==\hyperlink{validate_8js_a5df37b7f02e5cdc7d9412b7f872b8e01}{false})\{do\{\hyperlink{fullpage_2plugin_8js_a8b98017e64ef036adb9ae327ff94abe1}{if}(/$^\wedge$(S\+P\+A\+N$\vert$S\+T\+R\+O\+N\+G$\vert$B$\vert$E\+M$\vert$I$\vert$F\+O\+N\+T$\vert$S\+T\+R\+I\+K\+E$\vert$U)\$/.test(node.\+node\+Name))\{\hyperlink{fullpage_2plugin_8js_a8b98017e64ef036adb9ae327ff94abe1}{if}(node.\+id== '\+\_\+mce\+\_\+caret')\{continue;\}cloned\+Node=node.\+clone\+Node(\hyperlink{validate_8js_a5df37b7f02e5cdc7d9412b7f872b8e01}{false});dom.\+set\+Attrib(cloned\+Node, 'id', '');\hyperlink{fullpage_2plugin_8js_a8b98017e64ef036adb9ae327ff94abe1}{if}(block.\+has\+Child\+Nodes())\{\hyperlink{jquery-ui_8js_a282eb35406abfe6001815a393642b8cb}{cloned\+Node.\+append\+Child}(block.\+first\+Child);\hyperlink{jquery-ui_8js_a282eb35406abfe6001815a393642b8cb}{block.\+append\+Child}(cloned\+Node);\}\hyperlink{jquery_8iframe-transport_8js_a0544c3fe466e421738dae463968b70ba}{else}\{caret\+Node=cloned\+Node;\hyperlink{jquery-ui_8js_a282eb35406abfe6001815a393642b8cb}{block.\+append\+Child}(cloned\+Node);\}\}\}\hyperlink{extras_2_scroller_2media_2data_2server__processing_8php_a83084cf6f83823d8593882985353708d}{while}((node=node.\+parent\+Node));\}\hyperlink{fullpage_2plugin_8js_a8b98017e64ef036adb9ae327ff94abe1}{if}(!is\+I\+E)\{\hyperlink{jquery-ui_8js_a87f73c4f0391c1cf9fe60374a76d9a7b}{caret\+Node.\+inner\+H\+T\+M\+L}= '$<$ br \hyperlink{fullpage_2plugin_8js_a718c1bf5a3bf21ebb980203b142e5b75}{data}-\/mce-\/bogus=\char`\"{}1\char`\"{}$>$';\}return block;\}function is\+Caret\+At\+Start\+Or\+End\+Of\+Block(\hyperlink{jquery-1_89_81_8js_aef10902ffededd983608fdb8dbfc441a}{start})\{var walker, node, name;\hyperlink{fullpage_2plugin_8js_a8b98017e64ef036adb9ae327ff94abe1}{if}(container.\+node\+Type==3 \&\&(\hyperlink{jquery-1_89_81_8js_aef10902ffededd983608fdb8dbfc441a}{start}?\hyperlink{jquery-1_89_81_8js_a4a9f594d20d927164551fc7fa4751a2f}{offset} $>$ 0\+:\hyperlink{jquery-1_89_81_8js_a4a9f594d20d927164551fc7fa4751a2f}{offset}$<$ container.\+node\+Value.\+length))\{return \hyperlink{validate_8js_a5df37b7f02e5cdc7d9412b7f872b8e01}{false};\}\hyperlink{fullpage_2plugin_8js_a8b98017e64ef036adb9ae327ff94abe1}{if}(container.\+parent\+Node==parent\+Block \&\&is\+After\+Last\+Node\+In\+Container \&\&!\hyperlink{jquery-1_89_81_8js_aef10902ffededd983608fdb8dbfc441a}{start})\{return true;\}\hyperlink{fullpage_2plugin_8js_a8b98017e64ef036adb9ae327ff94abe1}{if}(\hyperlink{jquery-1_89_81_8js_aef10902ffededd983608fdb8dbfc441a}{start} \&\&container.\+node\+Type==1 \&\&container==parent\+Block.\+first\+Child)\{return true;\}\hyperlink{fullpage_2plugin_8js_a8b98017e64ef036adb9ae327ff94abe1}{if}(container.\+node\+Name===\char`\"{}T\+A\+B\+L\+E\char`\"{}$\vert$$\vert$(container.\+previous\+Sibling \&\&container.\+previous\+Sibling.\+node\+Name==\char`\"{}T\+A\+B\+L\+E\char`\"{}))\{return(is\+After\+Last\+Node\+In\+Container \&\&!\hyperlink{jquery-1_89_81_8js_aef10902ffededd983608fdb8dbfc441a}{start})$\vert$$\vert$(!is\+After\+Last\+Node\+In\+Container \&\&\hyperlink{jquery-1_89_81_8js_aef10902ffededd983608fdb8dbfc441a}{start});\}walker=new Tree\+Walker(container, parent\+Block);\hyperlink{fullpage_2plugin_8js_a8b98017e64ef036adb9ae327ff94abe1}{if}(container.\+node\+Type==3)\{\hyperlink{fullpage_2plugin_8js_a8b98017e64ef036adb9ae327ff94abe1}{if}(\hyperlink{jquery-1_89_81_8js_aef10902ffededd983608fdb8dbfc441a}{start} \&\&\hyperlink{jquery-1_89_81_8js_a4a9f594d20d927164551fc7fa4751a2f}{offset}===0)\{walker.\+prev();\}\hyperlink{jquery_8iframe-transport_8js_a0544c3fe466e421738dae463968b70ba}{else} \hyperlink{fullpage_2plugin_8js_a8b98017e64ef036adb9ae327ff94abe1}{if}(!\hyperlink{jquery-1_89_81_8js_aef10902ffededd983608fdb8dbfc441a}{start} \&\&\hyperlink{jquery-1_89_81_8js_a4a9f594d20d927164551fc7fa4751a2f}{offset}==container.\+node\+Value.\+length)\{walker.\+next();\}\}\hyperlink{extras_2_scroller_2media_2data_2server__processing_8php_a83084cf6f83823d8593882985353708d}{while}((node=walker.\+current()))\{\hyperlink{fullpage_2plugin_8js_a8b98017e64ef036adb9ae327ff94abe1}{if}(node.\+node\+Type===1)\{\hyperlink{fullpage_2plugin_8js_a8b98017e64ef036adb9ae327ff94abe1}{if}(!node.\+get\+Attribute('\hyperlink{fullpage_2plugin_8js_a718c1bf5a3bf21ebb980203b142e5b75}{data}-\/mce-\/bogus'))\{name=node.\+node\+Name.\+to\+Lower\+Case();\hyperlink{fullpage_2plugin_8js_a8b98017e64ef036adb9ae327ff94abe1}{if}(non\+Empty\+Elements\+Map\mbox{[}name\mbox{]}\&\&name!== 'br')\{return \hyperlink{validate_8js_a5df37b7f02e5cdc7d9412b7f872b8e01}{false};\}\}\}\hyperlink{jquery_8iframe-transport_8js_a0544c3fe466e421738dae463968b70ba}{else} \hyperlink{fullpage_2plugin_8js_a8b98017e64ef036adb9ae327ff94abe1}{if}(node.\+node\+Type===3 \&\&!/$^\wedge$\mbox{[}\textbackslash{}\hyperlink{fullpage_2plugin_8min_8js_ab767a859d1217315f42c9bb52fc648dc}{t\textbackslash{}r\textbackslash{}n}\mbox{]}$\ast$\$/.test(node.\+node\+Value))\{return \hyperlink{validate_8js_a5df37b7f02e5cdc7d9412b7f872b8e01}{false};\}\hyperlink{fullpage_2plugin_8js_a8b98017e64ef036adb9ae327ff94abe1}{if}(\hyperlink{jquery-1_89_81_8js_aef10902ffededd983608fdb8dbfc441a}{start})\{walker.\+prev();\}\hyperlink{jquery_8iframe-transport_8js_a0544c3fe466e421738dae463968b70ba}{else}\{walker.\+next();\}\}return true;\}function wrap\+Self\+And\+Siblings\+In\+Default\+Block(container, \hyperlink{jquery-1_89_81_8js_a4a9f594d20d927164551fc7fa4751a2f}{offset})\{var new\+Block, parent\+Block, start\+Node, node, next, root\+Block\+Name, block\+Name=new\+Block\+Name$\vert$$\vert$ 'P';parent\+Block=dom.\+get\+Parent(container, dom.\+is\+Block);root\+Block\+Name=editor.\+get\+Body().node\+Name.\+to\+Lower\+Case();\hyperlink{fullpage_2plugin_8js_a8b98017e64ef036adb9ae327ff94abe1}{if}(!parent\+Block$\vert$$\vert$!can\+Split\+Block(parent\+Block))\{parent\+Block=parent\+Block$\vert$$\vert$editable\+Root;\hyperlink{fullpage_2plugin_8js_a8b98017e64ef036adb9ae327ff94abe1}{if}(!parent\+Block.\+has\+Child\+Nodes())\{new\+Block=dom.\+create(block\+Name);set\+Forced\+Block\+Attrs(new\+Block);\hyperlink{jquery-ui_8js_a282eb35406abfe6001815a393642b8cb}{parent\+Block.\+append\+Child}(new\+Block);rng.\+set\+Start(new\+Block, 0);rng.\+set\+End(new\+Block, 0);return new\+Block;\}node=container;\hyperlink{extras_2_scroller_2media_2data_2server__processing_8php_a83084cf6f83823d8593882985353708d}{while}(node.\+parent\+Node!=parent\+Block)\{node=node.\+parent\+Node;\}\hyperlink{extras_2_scroller_2media_2data_2server__processing_8php_a83084cf6f83823d8593882985353708d}{while}(node \&\&!dom.\+is\+Block(node))\{start\+Node=node;node=node.\+previous\+Sibling;\}\hyperlink{fullpage_2plugin_8js_a8b98017e64ef036adb9ae327ff94abe1}{if}(start\+Node \&\&schema.\+is\+Valid\+Child(root\+Block\+Name, block\+Name.\+to\+Lower\+Case()))\{new\+Block=dom.\+create(block\+Name);set\+Forced\+Block\+Attrs(new\+Block);\hyperlink{jquery-ui_8js_a98ab1c3e007c3b40a9abc7f02b656401}{start\+Node.\+parent\+Node.\+insert\+Before}(new\+Block, start\+Node);node=start\+Node;\hyperlink{extras_2_scroller_2media_2data_2server__processing_8php_a83084cf6f83823d8593882985353708d}{while}(node \&\&!dom.\+is\+Block(node))\{next=node.\+next\+Sibling;\hyperlink{jquery-ui_8js_a282eb35406abfe6001815a393642b8cb}{new\+Block.\+append\+Child}(node);node=next;\}rng.\+set\+Start(container, \hyperlink{jquery-1_89_81_8js_a4a9f594d20d927164551fc7fa4751a2f}{offset});rng.\+set\+End(container, \hyperlink{jquery-1_89_81_8js_a4a9f594d20d927164551fc7fa4751a2f}{offset});\}\}return container;\}function handle\+Empty\+List\+Item()\{function is\+First\+Or\+Last\+Li(first)\{var node=container\+Block\mbox{[}first? 'first\+Child'\+: 'last\+Child'\mbox{]};\hyperlink{extras_2_scroller_2media_2data_2server__processing_8php_a83084cf6f83823d8593882985353708d}{while}(node)\{\hyperlink{fullpage_2plugin_8js_a8b98017e64ef036adb9ae327ff94abe1}{if}(node.\+node\+Type==1)\{break;\}node=node\mbox{[}first? 'next\+Sibling'\+: 'previous\+Sibling'\mbox{]};\}return node===parent\+Block;\}function get\+Container\+Block()\{var container\+Block\+Parent=container\+Block.\+parent\+Node;\hyperlink{fullpage_2plugin_8js_a8b98017e64ef036adb9ae327ff94abe1}{if}(container\+Block\+Parent.\+node\+Name== 'L\+I')\{return container\+Block\+Parent;\}return container\+Block;\}var container\+Block\+Parent\+Name=container\+Block.\+parent\+Node.\+node\+Name;\hyperlink{fullpage_2plugin_8js_a8b98017e64ef036adb9ae327ff94abe1}{if}(/$^\wedge$(O\+L$\vert$U\+L$\vert$L\+I)\$/.test(container\+Block\+Parent\+Name))\{new\+Block\+Name= 'L\+I';\}new\+Block=new\+Block\+Name?create\+New\+Block(new\+Block\+Name)\+:dom.\+create('B\+R');\hyperlink{fullpage_2plugin_8js_a8b98017e64ef036adb9ae327ff94abe1}{if}(is\+First\+Or\+Last\+Li(true)\&\&is\+First\+Or\+Last\+Li())\{\hyperlink{fullpage_2plugin_8js_a8b98017e64ef036adb9ae327ff94abe1}{if}(container\+Block\+Parent\+Name== 'L\+I')\{dom.\+insert\+After(new\+Block, get\+Container\+Block());\}\hyperlink{jquery_8iframe-transport_8js_a0544c3fe466e421738dae463968b70ba}{else}\{dom.\+replace(new\+Block, container\+Block);\}\}\hyperlink{jquery_8iframe-transport_8js_a0544c3fe466e421738dae463968b70ba}{else} \hyperlink{fullpage_2plugin_8js_a8b98017e64ef036adb9ae327ff94abe1}{if}(is\+First\+Or\+Last\+Li(true))\{\hyperlink{fullpage_2plugin_8js_a8b98017e64ef036adb9ae327ff94abe1}{if}(container\+Block\+Parent\+Name== 'L\+I')\{dom.\+insert\+After(new\+Block, get\+Container\+Block());\hyperlink{jquery-ui_8js_a282eb35406abfe6001815a393642b8cb}{new\+Block.\+append\+Child}(dom.\+doc.\+create\+Text\+Node(' '));\hyperlink{jquery-ui_8js_a282eb35406abfe6001815a393642b8cb}{new\+Block.\+append\+Child}(container\+Block);\}\hyperlink{jquery_8iframe-transport_8js_a0544c3fe466e421738dae463968b70ba}{else}\{\hyperlink{jquery-ui_8js_a98ab1c3e007c3b40a9abc7f02b656401}{container\+Block.\+parent\+Node.\+insert\+Before}(new\+Block, container\+Block);\}\}\hyperlink{jquery_8iframe-transport_8js_a0544c3fe466e421738dae463968b70ba}{else} \hyperlink{fullpage_2plugin_8js_a8b98017e64ef036adb9ae327ff94abe1}{if}(is\+First\+Or\+Last\+Li())\{dom.\+insert\+After(new\+Block, get\+Container\+Block());render\+Block\+On\+I\+E(new\+Block);\}\hyperlink{jquery_8iframe-transport_8js_a0544c3fe466e421738dae463968b70ba}{else}\{container\+Block=get\+Container\+Block();tmp\+Rng=rng.\+clone\+Range();tmp\+Rng.\+set\+Start\+After(parent\+Block);tmp\+Rng.\+set\+End\+After(container\+Block);fragment=tmp\+Rng.\+extract\+Contents();\hyperlink{fullpage_2plugin_8js_a8b98017e64ef036adb9ae327ff94abe1}{if}(new\+Block\+Name== 'L\+I'\&\&fragment.\+first\+Child.\+node\+Name== 'L\+I')\{new\+Block=fragment.\+first\+Child;dom.\+insert\+After(fragment, container\+Block);\}\hyperlink{jquery_8iframe-transport_8js_a0544c3fe466e421738dae463968b70ba}{else}\{dom.\+insert\+After(fragment, container\+Block);dom.\+insert\+After(new\+Block, container\+Block);\}\}\hyperlink{fullpage_2plugin_8min_8js_a3fe72a3812c61d06ea7c5cf2052f3dd2}{dom.\+remove}(parent\+Block);move\+To\+Caret\+Position(new\+Block);\hyperlink{theme_8min_8js_a1833965973c7833716346fa64230bb38}{undo\+Manager.\+add}();\}function has\+Right\+Side\+Content()\{var walker=new Tree\+Walker(container, parent\+Block), node;\hyperlink{extras_2_scroller_2media_2data_2server__processing_8php_a83084cf6f83823d8593882985353708d}{while}((node=walker.\+next()))\{\hyperlink{fullpage_2plugin_8js_a8b98017e64ef036adb9ae327ff94abe1}{if}(non\+Empty\+Elements\+Map\mbox{[}node.\+node\+Name.\+to\+Lower\+Case()\mbox{]}$\vert$$\vert$node.\+length $>$ 0)\{return true;\}\}\}function insert\+Br()\{var br\+Elm, extra\+Br, marker;\hyperlink{fullpage_2plugin_8js_a8b98017e64ef036adb9ae327ff94abe1}{if}(container \&\&container.\+node\+Type==3 \&\&\hyperlink{jquery-1_89_81_8js_a4a9f594d20d927164551fc7fa4751a2f}{offset} $>$=container.\+node\+Value.\+length)\{\hyperlink{fullpage_2plugin_8js_a8b98017e64ef036adb9ae327ff94abe1}{if}(!is\+I\+E \&\&!has\+Right\+Side\+Content())\{br\+Elm=dom.\+create('br');rng.\+insert\+Node(br\+Elm);rng.\+set\+Start\+After(br\+Elm);rng.\+set\+End\+After(br\+Elm);extra\+Br=true;\}\}br\+Elm=dom.\+create('br');rng.\+insert\+Node(br\+Elm);\hyperlink{fullpage_2plugin_8js_a8b98017e64ef036adb9ae327ff94abe1}{if}(is\+I\+E \&\&parent\+Block\+Name== 'P\+R\+E'\&\&(!document\+Mode$\vert$$\vert$document\+Mode$<$ 8))\{\hyperlink{jquery-ui_8js_a98ab1c3e007c3b40a9abc7f02b656401}{br\+Elm.\+parent\+Node.\+insert\+Before}(dom.\+doc.\+create\+Text\+Node('\textbackslash{}\hyperlink{jquery_8fancybox_8pack_8js_aaa5fef39529cdffdfa257202bb4fda9f}{r}'), br\+Elm);\}marker=dom.\+create('span',\{\}, '\&nbsp;');\hyperlink{jquery-ui_8js_a98ab1c3e007c3b40a9abc7f02b656401}{br\+Elm.\+parent\+Node.\+insert\+Before}(marker, br\+Elm);selection.\+scroll\+Into\+View(marker);\hyperlink{fullpage_2plugin_8min_8js_a3fe72a3812c61d06ea7c5cf2052f3dd2}{dom.\+remove}(marker);\hyperlink{fullpage_2plugin_8js_a8b98017e64ef036adb9ae327ff94abe1}{if}(!extra\+Br)\{rng.\+set\+Start\+After(br\+Elm);rng.\+set\+End\+After(br\+Elm);\}\hyperlink{jquery_8iframe-transport_8js_a0544c3fe466e421738dae463968b70ba}{else}\{rng.\+set\+Start\+Before(br\+Elm);rng.\+set\+End\+Before(br\+Elm);\}selection.\+set\+Rng(rng);\hyperlink{theme_8min_8js_a1833965973c7833716346fa64230bb38}{undo\+Manager.\+add}();\}function trim\+Leading\+Line\+Breaks(node)\{do\{\hyperlink{fullpage_2plugin_8js_a8b98017e64ef036adb9ae327ff94abe1}{if}(node.\+node\+Type===3)\{node.\+node\+Value=node.\+node\+Value.\+replace(/$^\wedge$\mbox{[}\textbackslash{}\hyperlink{fullpage_2plugin_8min_8js_ab767a859d1217315f42c9bb52fc648dc}{r\textbackslash{}n}\mbox{]}+/, '');\}node=node.\+first\+Child;\}\hyperlink{extras_2_scroller_2media_2data_2server__processing_8php_a83084cf6f83823d8593882985353708d}{while}(node);\}function get\+Editable\+Root(node)\{var \hyperlink{jquery_8mobile-1_83_81_8js_a11a10a6834f3c54a5380f4ff04d002a9}{root}=dom.\+get\+Root(), parent, editable\+Root;parent=node;\hyperlink{extras_2_scroller_2media_2data_2server__processing_8php_a83084cf6f83823d8593882985353708d}{while}(parent!==\hyperlink{jquery_8mobile-1_83_81_8js_a11a10a6834f3c54a5380f4ff04d002a9}{root} \&\&dom.\+get\+Content\+Editable(parent)!==\char`\"{}false\char`\"{})\{if(dom.\+get\+Content\+Editable(parent)===\char`\"{}true\char`\"{})\{editable\+Root=parent;\}parent=parent.\+parent\+Node;\}return parent!==\hyperlink{jquery_8mobile-1_83_81_8js_a11a10a6834f3c54a5380f4ff04d002a9}{root}?editable\+Root\+:root;\}function add\+Br\+To\+Block\+If\+Needed(block)\{var last\+Child;\hyperlink{fullpage_2plugin_8js_a8b98017e64ef036adb9ae327ff94abe1}{if}(!is\+I\+E)\{block.\+normalize();last\+Child=block.\+last\+Child;\hyperlink{fullpage_2plugin_8js_a8b98017e64ef036adb9ae327ff94abe1}{if}(!last\+Child$\vert$$\vert$(/$^\wedge$(left$\vert$right)\$/gi.\+test(\hyperlink{form__utils_8js_af366e8c0d1c01b1e1d0a10b6bb300956}{dom.\+get\+Style}(last\+Child, 'float', true))))\{\hyperlink{theme_8min_8js_a1833965973c7833716346fa64230bb38}{dom.\+add}(block, 'br');\}\}\}\hyperlink{fullpage_2plugin_8js_a8b98017e64ef036adb9ae327ff94abe1}{if}(!rng.\+collapsed)\{editor.\+exec\+Command('Delete');return;\}\hyperlink{fullpage_2plugin_8js_a8b98017e64ef036adb9ae327ff94abe1}{if}(evt.\+is\+Default\+Prevented())\{return;\}container=rng.\+start\+Container;\hyperlink{jquery-1_89_81_8js_a4a9f594d20d927164551fc7fa4751a2f}{offset}=rng.\+start\+Offset;new\+Block\+Name=(settings.\+force\+\_\+p\+\_\+newlines? '\hyperlink{media_2js_2jquery_8js_a32d2366ed9853870f0c2ef3553996e29}{p}'\+: '')$\vert$$\vert$settings.\+forced\+\_\+root\+\_\+block;new\+Block\+Name=new\+Block\+Name?new\+Block\+Name.\+to\+Upper\+Case()\+: '';document\+Mode=dom.\+doc.\+document\+Mode;shift\+Key=evt.\+shift\+Key;\hyperlink{fullpage_2plugin_8js_a8b98017e64ef036adb9ae327ff94abe1}{if}(container.\+node\+Type==1 \&\&container.\+has\+Child\+Nodes())\{is\+After\+Last\+Node\+In\+Container=\hyperlink{jquery-1_89_81_8js_a4a9f594d20d927164551fc7fa4751a2f}{offset} $>$ container.\+child\+Nodes.\+length-\/1;container=container.\+child\+Nodes\mbox{[}\hyperlink{jquery_8knob_8js_af99c323f6f9ad466be52be1b688d26fe}{Math.\+min}(\hyperlink{jquery-1_89_81_8js_a4a9f594d20d927164551fc7fa4751a2f}{offset}, container.\+child\+Nodes.\+length-\/1)\mbox{]}$\vert$$\vert$container;\hyperlink{fullpage_2plugin_8js_a8b98017e64ef036adb9ae327ff94abe1}{if}(is\+After\+Last\+Node\+In\+Container \&\&container.\+node\+Type==3)\{\hyperlink{jquery-1_89_81_8js_a4a9f594d20d927164551fc7fa4751a2f}{offset}=container.\+node\+Value.\+length;\}\hyperlink{jquery_8iframe-transport_8js_a0544c3fe466e421738dae463968b70ba}{else}\{\hyperlink{jquery-1_89_81_8js_a4a9f594d20d927164551fc7fa4751a2f}{offset}=0;\}\}editable\+Root=get\+Editable\+Root(container);\hyperlink{fullpage_2plugin_8js_a8b98017e64ef036adb9ae327ff94abe1}{if}(!editable\+Root)\{return;\}undo\+Manager.\+before\+Change();\hyperlink{fullpage_2plugin_8js_a8b98017e64ef036adb9ae327ff94abe1}{if}(!dom.\+is\+Block(editable\+Root)\&\&editable\+Root!=dom.\+get\+Root())\{\hyperlink{fullpage_2plugin_8js_a8b98017e64ef036adb9ae327ff94abe1}{if}(!new\+Block\+Name$\vert$$\vert$shift\+Key)\{insert\+Br();\}return;\}\hyperlink{fullpage_2plugin_8js_a8b98017e64ef036adb9ae327ff94abe1}{if}((new\+Block\+Name \&\&!shift\+Key)$\vert$$\vert$(!new\+Block\+Name \&\&shift\+Key))\{container=wrap\+Self\+And\+Siblings\+In\+Default\+Block(container, \hyperlink{jquery-1_89_81_8js_a4a9f594d20d927164551fc7fa4751a2f}{offset});\}parent\+Block=dom.\+get\+Parent(container, dom.\+is\+Block);container\+Block=parent\+Block?dom.\+get\+Parent(parent\+Block.\+parent\+Node, dom.\+is\+Block)\+:\hyperlink{validate_8js_afb8e110345c45e74478894341ab6b28e}{null};parent\+Block\+Name=parent\+Block?parent\+Block.\+node\+Name.\+to\+Upper\+Case()\+: '';container\+Block\+Name=container\+Block?container\+Block.\+node\+Name.\+to\+Upper\+Case()\+: '';\hyperlink{fullpage_2plugin_8js_a8b98017e64ef036adb9ae327ff94abe1}{if}(container\+Block\+Name== 'L\+I'\&\&!evt.\+ctrl\+Key)\{parent\+Block=container\+Block;parent\+Block\+Name=container\+Block\+Name;\}\hyperlink{fullpage_2plugin_8js_a8b98017e64ef036adb9ae327ff94abe1}{if}(parent\+Block\+Name== 'L\+I')\{\hyperlink{fullpage_2plugin_8js_a8b98017e64ef036adb9ae327ff94abe1}{if}(!new\+Block\+Name \&\&shift\+Key)\{insert\+Br();return;\}\hyperlink{fullpage_2plugin_8js_a8b98017e64ef036adb9ae327ff94abe1}{if}(dom.\+is\+Empty(parent\+Block))\{handle\+Empty\+List\+Item();return;\}\}\hyperlink{fullpage_2plugin_8js_a8b98017e64ef036adb9ae327ff94abe1}{if}(parent\+Block\+Name== 'P\+R\+E'\&\&settings.\+br\+\_\+in\+\_\+pre!==\hyperlink{validate_8js_a5df37b7f02e5cdc7d9412b7f872b8e01}{false})\{\hyperlink{fullpage_2plugin_8js_a8b98017e64ef036adb9ae327ff94abe1}{if}(!shift\+Key)\{insert\+Br();return;\}\}\hyperlink{jquery_8iframe-transport_8js_a0544c3fe466e421738dae463968b70ba}{else}\{\hyperlink{fullpage_2plugin_8js_a8b98017e64ef036adb9ae327ff94abe1}{if}((!new\+Block\+Name \&\&!shift\+Key \&\&parent\+Block\+Name!= 'L\+I')$\vert$$\vert$(new\+Block\+Name \&\&shift\+Key))\{insert\+Br();return;\}\}\hyperlink{fullpage_2plugin_8js_a8b98017e64ef036adb9ae327ff94abe1}{if}(new\+Block\+Name \&\&parent\+Block===editor.\+get\+Body())\{return;\}new\+Block\+Name=new\+Block\+Name$\vert$$\vert$ 'P';\hyperlink{fullpage_2plugin_8js_a8b98017e64ef036adb9ae327ff94abe1}{if}(is\+Caret\+At\+Start\+Or\+End\+Of\+Block())\{\hyperlink{fullpage_2plugin_8js_a8b98017e64ef036adb9ae327ff94abe1}{if}(/$^\wedge$(\hyperlink{jquery_8fancybox_8js_abd057520df7a5dc64fe29b4edd3166a3}{H}\mbox{[}1-\/6\mbox{]}$\vert$P\+R\+E$\vert$F\+I\+G\+U\+R\+E)\$/.test(parent\+Block\+Name)\&\&container\+Block\+Name!= 'H\+G\+R\+O\+U\+P')\{new\+Block=create\+New\+Block(new\+Block\+Name);\}\hyperlink{jquery_8iframe-transport_8js_a0544c3fe466e421738dae463968b70ba}{else}\{new\+Block=create\+New\+Block();\}\hyperlink{fullpage_2plugin_8js_a8b98017e64ef036adb9ae327ff94abe1}{if}(settings.\+end\+\_\+container\+\_\+on\+\_\+empty\+\_\+block \&\&can\+Split\+Block(container\+Block)\&\&dom.\+is\+Empty(parent\+Block))\{new\+Block=dom.\+split(container\+Block, parent\+Block);\}\hyperlink{jquery_8iframe-transport_8js_a0544c3fe466e421738dae463968b70ba}{else}\{dom.\+insert\+After(new\+Block, parent\+Block);\}move\+To\+Caret\+Position(new\+Block);\}\hyperlink{jquery_8iframe-transport_8js_a0544c3fe466e421738dae463968b70ba}{else} \hyperlink{fullpage_2plugin_8js_a8b98017e64ef036adb9ae327ff94abe1}{if}(is\+Caret\+At\+Start\+Or\+End\+Of\+Block(true))\{new\+Block=\hyperlink{jquery-ui_8js_a98ab1c3e007c3b40a9abc7f02b656401}{parent\+Block.\+parent\+Node.\+insert\+Before}(create\+New\+Block(), parent\+Block);render\+Block\+On\+I\+E(new\+Block);move\+To\+Caret\+Position(parent\+Block);\}\hyperlink{jquery_8iframe-transport_8js_a0544c3fe466e421738dae463968b70ba}{else}\{tmp\+Rng=rng.\+clone\+Range();tmp\+Rng.\+set\+End\+After(parent\+Block);fragment=tmp\+Rng.\+extract\+Contents();trim\+Leading\+Line\+Breaks(fragment);new\+Block=fragment.\+first\+Child;dom.\+insert\+After(fragment, parent\+Block);trim\+Inline\+Elements\+On\+Left\+Side\+Of\+Block(new\+Block);add\+Br\+To\+Block\+If\+Needed(parent\+Block);move\+To\+Caret\+Position(new\+Block);\}dom.\+set\+Attrib(new\+Block, 'id', '');\hyperlink{_format_controls_8js_acd7a0915b5228909cee16d24a676911c}{editor.\+fire}('New\+Block',\{new\+Block\+:new\+Block\});\hyperlink{theme_8min_8js_a1833965973c7833716346fa64230bb38}{undo\+Manager.\+add}();\}\hyperlink{fullpage_2plugin_8min_8js_a1cfa98b7fed2aaf9fee3b68dbb7f9497}{editor.\+on}('keydown', function(evt)\{\hyperlink{fullpage_2plugin_8js_a8b98017e64ef036adb9ae327ff94abe1}{if}(evt.\+key\+Code==13)\{\hyperlink{fullpage_2plugin_8js_a8b98017e64ef036adb9ae327ff94abe1}{if}(handle\+Enter\+Key(evt)!==\hyperlink{validate_8js_a5df37b7f02e5cdc7d9412b7f872b8e01}{false})\{evt.\+prevent\+Default();\}\}\});\};\})
\end{DoxyCompactItemize}


\subsection{Function Documentation}
\hypertarget{_enter_key_8js_a8e95fa45d4d85ca4fbf5dc1816aa6ecf}{\index{Enter\+Key.\+js@{Enter\+Key.\+js}!define@{define}}
\index{define@{define}!Enter\+Key.\+js@{Enter\+Key.\+js}}
\subsubsection[{define}]{\setlength{\rightskip}{0pt plus 5cm}define (
\begin{DoxyParamCaption}
\item[{\char`\"{}tinymce/Enter\+Key\char`\"{}}]{, }
\item[{function(Tree\+Walker, Env)\{var is\+I\+E={\bf Env.\+ie} \&\&{\bf Env.\+ie}$<$ 11;return function(editor)\{var dom=editor.\+dom, selection=editor.\+selection, {\bf settings}={\bf editor.\+settings};var undo\+Manager=editor.\+undo\+Manager, schema=editor.\+schema, non\+Empty\+Elements\+Map=schema.\+get\+Non\+Empty\+Elements();function handle\+Enter\+Key(evt)\{var rng=selection.\+get\+Rng(true), tmp\+Rng, editable\+Root, container, {\bf offset}, parent\+Block, document\+Mode, shift\+Key, new\+Block, fragment, container\+Block, parent\+Block\+Name, container\+Block\+Name, new\+Block\+Name, is\+After\+Last\+Node\+In\+Container;function can\+Split\+Block(node)\{return node \&\&dom.\+is\+Block(node)\&\&!/$^\wedge$(T\+D$\vert$T\+H$\vert$C\+A\+P\+T\+I\+O\+N$\vert$F\+O\+R\+M)\$/.test(node.\+node\+Name)\&\&!/$^\wedge$(fixed$\vert$absolute)/i.\+test({\bf node.\+style.\+position})\&\&dom.\+get\+Content\+Editable(node)!==\char`\"{}true\char`\"{};\}function render\+Block\+On\+I\+E(block)\{var old\+Rng;{\bf if}(dom.\+is\+Block(block))\{old\+Rng=selection.\+get\+Rng();{\bf block.\+append\+Child}(dom.\+create('span', {\bf null}, '\textbackslash{}u00a0'));{\bf selection.\+select}(block);block.\+last\+Child.\+outer\+H\+T\+M\+L= '';selection.\+set\+Rng(old\+Rng);\}\}function trim\+Inline\+Elements\+On\+Left\+Side\+Of\+Block(block)\{var node=block, first\+Childs=\mbox{[}$\,$\mbox{]}, {\bf i};{\bf while}((node=node.\+first\+Child))\{{\bf if}(dom.\+is\+Block(node))\{return;\}{\bf if}(node.\+node\+Type==1 \&\&!non\+Empty\+Elements\+Map\mbox{[}node.\+node\+Name.\+to\+Lower\+Case()\mbox{]})\{{\bf first\+Childs.\+push}(node);\}\}{\bf i}=first\+Childs.\+length;{\bf while}({\bf i}-\/-\/)\{node=first\+Childs\mbox{[}{\bf i}\mbox{]};{\bf if}(!node.\+has\+Child\+Nodes()$\vert$$\vert$(node.\+first\+Child==node.\+last\+Child \&\&node.\+first\+Child.\+node\+Value=== ''))\{{\bf dom.\+remove}(node);\}{\bf else}\{{\bf if}(node.\+node\+Name==\char`\"{}A\char`\"{}\&\&(node.\+inner\+Text$\vert$$\vert$node.\+text\+Content)=== ' ')\{{\bf dom.\+remove}(node);\}\}\}\}function move\+To\+Caret\+Position({\bf root})\{var walker, node, rng, last\+Node={\bf root}, temp\+Elm;function first\+Non\+White\+Space\+Node\+Sibling(node)\{{\bf while}(node)\{{\bf if}(node.\+node\+Type==1$\vert$$\vert$(node.\+node\+Type==3 \&\&{\bf node.\+data} \&\&/\mbox{[}\textbackslash{}{\bf r\textbackslash{}n\textbackslash{}s}\mbox{]}/.test({\bf node.\+data})))\{return node;\}node=node.\+next\+Sibling;\}\}{\bf if}({\bf Env.\+ie} \&\&{\bf Env.\+ie}$<$ 9 \&\&parent\+Block \&\&parent\+Block.\+first\+Child)\{{\bf if}(parent\+Block.\+first\+Child==parent\+Block.\+last\+Child \&\&{\bf parent\+Block.\+first\+Child.\+tag\+Name}== 'B\+R')\{{\bf dom.\+remove}(parent\+Block.\+first\+Child);\}\}{\bf if}(root.\+node\+Name== 'L\+I')\{var first\+Child=first\+Non\+White\+Space\+Node\+Sibling(root.\+first\+Child);{\bf if}(first\+Child \&\&/$^\wedge$(U\+L$\vert$O\+L)\$/.test(first\+Child.\+node\+Name))\{{\bf root.\+insert\+Before}(dom.\+doc.\+create\+Text\+Node('\textbackslash{}u00a0'), root.\+first\+Child);\}\}rng=dom.\+create\+Rng();{\bf if}(root.\+has\+Child\+Nodes())\{walker=new Tree\+Walker({\bf root}, {\bf root});{\bf while}((node=walker.\+current()))\{{\bf if}(node.\+node\+Type==3)\{rng.\+set\+Start(node, 0);rng.\+set\+End(node, 0);break;\}{\bf if}(non\+Empty\+Elements\+Map\mbox{[}node.\+node\+Name.\+to\+Lower\+Case()\mbox{]})\{rng.\+set\+Start\+Before(node);rng.\+set\+End\+Before(node);break;\}last\+Node=node;node=walker.\+next();\}{\bf if}(!node)\{rng.\+set\+Start(last\+Node, 0);rng.\+set\+End(last\+Node, 0);\}\}{\bf else}\{{\bf if}(root.\+node\+Name== 'B\+R')\{{\bf if}(root.\+next\+Sibling \&\&dom.\+is\+Block(root.\+next\+Sibling))\{{\bf if}(!document\+Mode$\vert$$\vert$document\+Mode$<$ 9)\{temp\+Elm=dom.\+create('br');{\bf root.\+parent\+Node.\+insert\+Before}(temp\+Elm, {\bf root});\}rng.\+set\+Start\+Before({\bf root});rng.\+set\+End\+Before({\bf root});\}{\bf else}\{rng.\+set\+Start\+After({\bf root});rng.\+set\+End\+After({\bf root});\}\}{\bf else}\{rng.\+set\+Start({\bf root}, 0);rng.\+set\+End({\bf root}, 0);\}\}selection.\+set\+Rng(rng);{\bf dom.\+remove}(temp\+Elm);selection.\+scroll\+Into\+View({\bf root});\}function set\+Forced\+Block\+Attrs(node)\{var forced\+Root\+Block\+Name=settings.\+forced\+\_\+root\+\_\+block;{\bf if}(forced\+Root\+Block\+Name \&\&forced\+Root\+Block\+Name.\+to\+Lower\+Case()===node.\+tag\+Name.\+to\+Lower\+Case())\{{\bf dom.\+set\+Attribs}(node, settings.\+forced\+\_\+root\+\_\+block\+\_\+attrs);\}\}function create\+New\+Block(name)\{var node=container, block, cloned\+Node, caret\+Node;{\bf if}(name$\vert$$\vert$parent\+Block\+Name==\char`\"{}T\+A\+B\+L\+E\char`\"{})\{block=dom.\+create(name$\vert$$\vert$new\+Block\+Name);set\+Forced\+Block\+Attrs(block);\}{\bf else}\{block=parent\+Block.\+clone\+Node({\bf false});\}caret\+Node=block;{\bf if}(settings.\+keep\+\_\+styles!=={\bf false})\{do\{{\bf if}(/$^\wedge$(S\+P\+A\+N$\vert$S\+T\+R\+O\+N\+G$\vert$B$\vert$E\+M$\vert$I$\vert$F\+O\+N\+T$\vert$S\+T\+R\+I\+K\+E$\vert$U)\$/.test(node.\+node\+Name))\{{\bf if}(node.\+id== '\+\_\+mce\+\_\+caret')\{continue;\}cloned\+Node=node.\+clone\+Node({\bf false});dom.\+set\+Attrib(cloned\+Node, 'id', '');{\bf if}(block.\+has\+Child\+Nodes())\{{\bf cloned\+Node.\+append\+Child}(block.\+first\+Child);{\bf block.\+append\+Child}(cloned\+Node);\}{\bf else}\{caret\+Node=cloned\+Node;{\bf block.\+append\+Child}(cloned\+Node);\}\}\}{\bf while}((node=node.\+parent\+Node));\}{\bf if}(!is\+I\+E)\{{\bf caret\+Node.\+inner\+H\+T\+M\+L}= '$<$ br {\bf data}-\/mce-\/bogus=\char`\"{}1\char`\"{}$>$';\}return block;\}function is\+Caret\+At\+Start\+Or\+End\+Of\+Block({\bf start})\{var walker, node, name;{\bf if}(container.\+node\+Type==3 \&\&({\bf start}?{\bf offset} $>$ 0\+:{\bf offset}$<$ container.\+node\+Value.\+length))\{return {\bf false};\}{\bf if}(container.\+parent\+Node==parent\+Block \&\&is\+After\+Last\+Node\+In\+Container \&\&!{\bf start})\{return true;\}{\bf if}({\bf start} \&\&container.\+node\+Type==1 \&\&container==parent\+Block.\+first\+Child)\{return true;\}{\bf if}(container.\+node\+Name===\char`\"{}T\+A\+B\+L\+E\char`\"{}$\vert$$\vert$(container.\+previous\+Sibling \&\&container.\+previous\+Sibling.\+node\+Name==\char`\"{}T\+A\+B\+L\+E\char`\"{}))\{return(is\+After\+Last\+Node\+In\+Container \&\&!{\bf start})$\vert$$\vert$(!is\+After\+Last\+Node\+In\+Container \&\&{\bf start});\}walker=new Tree\+Walker(container, parent\+Block);{\bf if}(container.\+node\+Type==3)\{{\bf if}({\bf start} \&\&{\bf offset}===0)\{walker.\+prev();\}{\bf else} {\bf if}(!{\bf start} \&\&{\bf offset}==container.\+node\+Value.\+length)\{walker.\+next();\}\}{\bf while}((node=walker.\+current()))\{{\bf if}(node.\+node\+Type===1)\{{\bf if}(!node.\+get\+Attribute('{\bf data}-\/mce-\/bogus'))\{name=node.\+node\+Name.\+to\+Lower\+Case();{\bf if}(non\+Empty\+Elements\+Map\mbox{[}name\mbox{]}\&\&name!== 'br')\{return {\bf false};\}\}\}{\bf else} {\bf if}(node.\+node\+Type===3 \&\&!/$^\wedge$\mbox{[}\textbackslash{}{\bf t\textbackslash{}r\textbackslash{}n}\mbox{]}$\ast$\$/.test(node.\+node\+Value))\{return {\bf false};\}{\bf if}({\bf start})\{walker.\+prev();\}{\bf else}\{walker.\+next();\}\}return true;\}function wrap\+Self\+And\+Siblings\+In\+Default\+Block(container, {\bf offset})\{var new\+Block, parent\+Block, start\+Node, node, next, root\+Block\+Name, block\+Name=new\+Block\+Name$\vert$$\vert$ 'P';parent\+Block=dom.\+get\+Parent(container, dom.\+is\+Block);root\+Block\+Name=editor.\+get\+Body().node\+Name.\+to\+Lower\+Case();{\bf if}(!parent\+Block$\vert$$\vert$!can\+Split\+Block(parent\+Block))\{parent\+Block=parent\+Block$\vert$$\vert$editable\+Root;{\bf if}(!parent\+Block.\+has\+Child\+Nodes())\{new\+Block=dom.\+create(block\+Name);set\+Forced\+Block\+Attrs(new\+Block);{\bf parent\+Block.\+append\+Child}(new\+Block);rng.\+set\+Start(new\+Block, 0);rng.\+set\+End(new\+Block, 0);return new\+Block;\}node=container;{\bf while}(node.\+parent\+Node!=parent\+Block)\{node=node.\+parent\+Node;\}{\bf while}(node \&\&!dom.\+is\+Block(node))\{start\+Node=node;node=node.\+previous\+Sibling;\}{\bf if}(start\+Node \&\&schema.\+is\+Valid\+Child(root\+Block\+Name, block\+Name.\+to\+Lower\+Case()))\{new\+Block=dom.\+create(block\+Name);set\+Forced\+Block\+Attrs(new\+Block);{\bf start\+Node.\+parent\+Node.\+insert\+Before}(new\+Block, start\+Node);node=start\+Node;{\bf while}(node \&\&!dom.\+is\+Block(node))\{next=node.\+next\+Sibling;{\bf new\+Block.\+append\+Child}(node);node=next;\}rng.\+set\+Start(container, {\bf offset});rng.\+set\+End(container, {\bf offset});\}\}return container;\}function handle\+Empty\+List\+Item()\{function is\+First\+Or\+Last\+Li(first)\{var node=container\+Block\mbox{[}first? 'first\+Child'\+: 'last\+Child'\mbox{]};{\bf while}(node)\{{\bf if}(node.\+node\+Type==1)\{break;\}node=node\mbox{[}first? 'next\+Sibling'\+: 'previous\+Sibling'\mbox{]};\}return node===parent\+Block;\}function get\+Container\+Block()\{var container\+Block\+Parent=container\+Block.\+parent\+Node;{\bf if}(container\+Block\+Parent.\+node\+Name== 'L\+I')\{return container\+Block\+Parent;\}return container\+Block;\}var container\+Block\+Parent\+Name=container\+Block.\+parent\+Node.\+node\+Name;{\bf if}(/$^\wedge$(O\+L$\vert$U\+L$\vert$L\+I)\$/.test(container\+Block\+Parent\+Name))\{new\+Block\+Name= 'L\+I';\}new\+Block=new\+Block\+Name?create\+New\+Block(new\+Block\+Name)\+:dom.\+create('B\+R');{\bf if}(is\+First\+Or\+Last\+Li(true)\&\&is\+First\+Or\+Last\+Li())\{{\bf if}(container\+Block\+Parent\+Name== 'L\+I')\{dom.\+insert\+After(new\+Block, get\+Container\+Block());\}{\bf else}\{dom.\+replace(new\+Block, container\+Block);\}\}{\bf else} {\bf if}(is\+First\+Or\+Last\+Li(true))\{{\bf if}(container\+Block\+Parent\+Name== 'L\+I')\{dom.\+insert\+After(new\+Block, get\+Container\+Block());{\bf new\+Block.\+append\+Child}(dom.\+doc.\+create\+Text\+Node(' '));{\bf new\+Block.\+append\+Child}(container\+Block);\}{\bf else}\{{\bf container\+Block.\+parent\+Node.\+insert\+Before}(new\+Block, container\+Block);\}\}{\bf else} {\bf if}(is\+First\+Or\+Last\+Li())\{dom.\+insert\+After(new\+Block, get\+Container\+Block());render\+Block\+On\+I\+E(new\+Block);\}{\bf else}\{container\+Block=get\+Container\+Block();tmp\+Rng=rng.\+clone\+Range();tmp\+Rng.\+set\+Start\+After(parent\+Block);tmp\+Rng.\+set\+End\+After(container\+Block);fragment=tmp\+Rng.\+extract\+Contents();{\bf if}(new\+Block\+Name== 'L\+I'\&\&fragment.\+first\+Child.\+node\+Name== 'L\+I')\{new\+Block=fragment.\+first\+Child;dom.\+insert\+After(fragment, container\+Block);\}{\bf else}\{dom.\+insert\+After(fragment, container\+Block);dom.\+insert\+After(new\+Block, container\+Block);\}\}{\bf dom.\+remove}(parent\+Block);move\+To\+Caret\+Position(new\+Block);{\bf undo\+Manager.\+add}();\}function has\+Right\+Side\+Content()\{var walker=new Tree\+Walker(container, parent\+Block), node;{\bf while}((node=walker.\+next()))\{{\bf if}(non\+Empty\+Elements\+Map\mbox{[}node.\+node\+Name.\+to\+Lower\+Case()\mbox{]}$\vert$$\vert$node.\+length $>$ 0)\{return true;\}\}\}function insert\+Br()\{var br\+Elm, extra\+Br, marker;{\bf if}(container \&\&container.\+node\+Type==3 \&\&{\bf offset} $>$=container.\+node\+Value.\+length)\{{\bf if}(!is\+I\+E \&\&!has\+Right\+Side\+Content())\{br\+Elm=dom.\+create('br');rng.\+insert\+Node(br\+Elm);rng.\+set\+Start\+After(br\+Elm);rng.\+set\+End\+After(br\+Elm);extra\+Br=true;\}\}br\+Elm=dom.\+create('br');rng.\+insert\+Node(br\+Elm);{\bf if}(is\+I\+E \&\&parent\+Block\+Name== 'P\+R\+E'\&\&(!document\+Mode$\vert$$\vert$document\+Mode$<$ 8))\{{\bf br\+Elm.\+parent\+Node.\+insert\+Before}(dom.\+doc.\+create\+Text\+Node('\textbackslash{}{\bf r}'), br\+Elm);\}marker=dom.\+create('span',\{\}, '\&nbsp;');{\bf br\+Elm.\+parent\+Node.\+insert\+Before}(marker, br\+Elm);selection.\+scroll\+Into\+View(marker);{\bf dom.\+remove}(marker);{\bf if}(!extra\+Br)\{rng.\+set\+Start\+After(br\+Elm);rng.\+set\+End\+After(br\+Elm);\}{\bf else}\{rng.\+set\+Start\+Before(br\+Elm);rng.\+set\+End\+Before(br\+Elm);\}selection.\+set\+Rng(rng);{\bf undo\+Manager.\+add}();\}function trim\+Leading\+Line\+Breaks(node)\{do\{{\bf if}(node.\+node\+Type===3)\{node.\+node\+Value=node.\+node\+Value.\+replace(/$^\wedge$\mbox{[}\textbackslash{}{\bf r\textbackslash{}n}\mbox{]}+/, '');\}node=node.\+first\+Child;\}{\bf while}(node);\}function get\+Editable\+Root(node)\{var {\bf root}=dom.\+get\+Root(), parent, editable\+Root;parent=node;{\bf while}(parent!=={\bf root} \&\&dom.\+get\+Content\+Editable(parent)!==\char`\"{}false\char`\"{})\{if(dom.\+get\+Content\+Editable(parent)===\char`\"{}true\char`\"{})\{editable\+Root=parent;\}parent=parent.\+parent\+Node;\}return parent!=={\bf root}?editable\+Root\+:root;\}function add\+Br\+To\+Block\+If\+Needed(block)\{var last\+Child;{\bf if}(!is\+I\+E)\{block.\+normalize();last\+Child=block.\+last\+Child;{\bf if}(!last\+Child$\vert$$\vert$(/$^\wedge$(left$\vert$right)\$/gi.\+test({\bf dom.\+get\+Style}(last\+Child, 'float', true))))\{{\bf dom.\+add}(block, 'br');\}\}\}{\bf if}(!rng.\+collapsed)\{editor.\+exec\+Command('Delete');return;\}{\bf if}(evt.\+is\+Default\+Prevented())\{return;\}container=rng.\+start\+Container;{\bf offset}=rng.\+start\+Offset;new\+Block\+Name=(settings.\+force\+\_\+p\+\_\+newlines? '{\bf p}'\+: '')$\vert$$\vert$settings.\+forced\+\_\+root\+\_\+block;new\+Block\+Name=new\+Block\+Name?new\+Block\+Name.\+to\+Upper\+Case()\+: '';document\+Mode=dom.\+doc.\+document\+Mode;shift\+Key=evt.\+shift\+Key;{\bf if}(container.\+node\+Type==1 \&\&container.\+has\+Child\+Nodes())\{is\+After\+Last\+Node\+In\+Container={\bf offset} $>$ container.\+child\+Nodes.\+length-\/1;container=container.\+child\+Nodes\mbox{[}{\bf Math.\+min}({\bf offset}, container.\+child\+Nodes.\+length-\/1)\mbox{]}$\vert$$\vert$container;{\bf if}(is\+After\+Last\+Node\+In\+Container \&\&container.\+node\+Type==3)\{{\bf offset}=container.\+node\+Value.\+length;\}{\bf else}\{{\bf offset}=0;\}\}editable\+Root=get\+Editable\+Root(container);{\bf if}(!editable\+Root)\{return;\}undo\+Manager.\+before\+Change();{\bf if}(!dom.\+is\+Block(editable\+Root)\&\&editable\+Root!=dom.\+get\+Root())\{{\bf if}(!new\+Block\+Name$\vert$$\vert$shift\+Key)\{insert\+Br();\}return;\}{\bf if}((new\+Block\+Name \&\&!shift\+Key)$\vert$$\vert$(!new\+Block\+Name \&\&shift\+Key))\{container=wrap\+Self\+And\+Siblings\+In\+Default\+Block(container, {\bf offset});\}parent\+Block=dom.\+get\+Parent(container, dom.\+is\+Block);container\+Block=parent\+Block?dom.\+get\+Parent(parent\+Block.\+parent\+Node, dom.\+is\+Block)\+:{\bf null};parent\+Block\+Name=parent\+Block?parent\+Block.\+node\+Name.\+to\+Upper\+Case()\+: '';container\+Block\+Name=container\+Block?container\+Block.\+node\+Name.\+to\+Upper\+Case()\+: '';{\bf if}(container\+Block\+Name== 'L\+I'\&\&!evt.\+ctrl\+Key)\{parent\+Block=container\+Block;parent\+Block\+Name=container\+Block\+Name;\}{\bf if}(parent\+Block\+Name== 'L\+I')\{{\bf if}(!new\+Block\+Name \&\&shift\+Key)\{insert\+Br();return;\}{\bf if}(dom.\+is\+Empty(parent\+Block))\{handle\+Empty\+List\+Item();return;\}\}{\bf if}(parent\+Block\+Name== 'P\+R\+E'\&\&settings.\+br\+\_\+in\+\_\+pre!=={\bf false})\{{\bf if}(!shift\+Key)\{insert\+Br();return;\}\}{\bf else}\{{\bf if}((!new\+Block\+Name \&\&!shift\+Key \&\&parent\+Block\+Name!= 'L\+I')$\vert$$\vert$(new\+Block\+Name \&\&shift\+Key))\{insert\+Br();return;\}\}{\bf if}(new\+Block\+Name \&\&parent\+Block===editor.\+get\+Body())\{return;\}new\+Block\+Name=new\+Block\+Name$\vert$$\vert$ 'P';{\bf if}(is\+Caret\+At\+Start\+Or\+End\+Of\+Block())\{{\bf if}(/$^\wedge$({\bf H}\mbox{[}1-\/6\mbox{]}$\vert$P\+R\+E$\vert$F\+I\+G\+U\+R\+E)\$/.test(parent\+Block\+Name)\&\&container\+Block\+Name!= 'H\+G\+R\+O\+U\+P')\{new\+Block=create\+New\+Block(new\+Block\+Name);\}{\bf else}\{new\+Block=create\+New\+Block();\}{\bf if}(settings.\+end\+\_\+container\+\_\+on\+\_\+empty\+\_\+block \&\&can\+Split\+Block(container\+Block)\&\&dom.\+is\+Empty(parent\+Block))\{new\+Block=dom.\+split(container\+Block, parent\+Block);\}{\bf else}\{dom.\+insert\+After(new\+Block, parent\+Block);\}move\+To\+Caret\+Position(new\+Block);\}{\bf else} {\bf if}(is\+Caret\+At\+Start\+Or\+End\+Of\+Block(true))\{new\+Block={\bf parent\+Block.\+parent\+Node.\+insert\+Before}(create\+New\+Block(), parent\+Block);render\+Block\+On\+I\+E(new\+Block);move\+To\+Caret\+Position(parent\+Block);\}{\bf else}\{tmp\+Rng=rng.\+clone\+Range();tmp\+Rng.\+set\+End\+After(parent\+Block);fragment=tmp\+Rng.\+extract\+Contents();trim\+Leading\+Line\+Breaks(fragment);new\+Block=fragment.\+first\+Child;dom.\+insert\+After(fragment, parent\+Block);trim\+Inline\+Elements\+On\+Left\+Side\+Of\+Block(new\+Block);add\+Br\+To\+Block\+If\+Needed(parent\+Block);move\+To\+Caret\+Position(new\+Block);\}dom.\+set\+Attrib(new\+Block, 'id', '');{\bf editor.\+fire}('New\+Block',\{new\+Block\+:new\+Block\});{\bf undo\+Manager.\+add}();\}{\bf editor.\+on}('keydown', function(evt)\{{\bf if}(evt.\+key\+Code==13)\{{\bf if}(handle\+Enter\+Key(evt)!=={\bf false})\{evt.\+prevent\+Default();\}\}\});\};\}}]{}
\end{DoxyParamCaption}
)}}\label{_enter_key_8js_a8e95fa45d4d85ca4fbf5dc1816aa6ecf}
\hyperlink{_enter_key_8js}{Enter\+Key.\+js}

Copyright, Moxiecode Systems A\+B Released under L\+G\+P\+L License.

License\+: \href{http://www.tinymce.com/license}{\tt http\+://www.\+tinymce.\+com/license} Contributing\+: \href{http://www.tinymce.com/contributing}{\tt http\+://www.\+tinymce.\+com/contributing} Contains logic for handling the enter key to split/generate block elements. 